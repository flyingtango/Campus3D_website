<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" class="next-head"/><meta name="description" content="The NUS panoramic 3D provides a large-scale 3D point cloud dataset of NUS campus" class="jsx-2512323305 next-head"/><title class="next-head">Getting Started - Next.js Documentation</title><meta name="twitter:card" content="summary" class="next-head"/><meta name="twitter:site" content="@zeithq" class="next-head"/><meta name="og:title" content="Getting Started" class="next-head"/><meta name="og:description" class="next-head"/><link rel="preload" href="/_next/static/WeQFcs1os6sOMY6FC6k3Y/pages/docs.js" as="script"/><link rel="preload" href="/_next/static/WeQFcs1os6sOMY6FC6k3Y/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/WeQFcs1os6sOMY6FC6k3Y/pages/_error.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-42652fa8b82c329c0559.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9e21cdbed9da63fd5a24.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-102cb6d6521304c548b6.js" as="script"/><style id="__jsx-1164718727">.jsx-2512323305{overflow-x:hidden;}</style><style id="__jsx-2882651367">html{line-height:1.15;-webkit-text-size-adjust:100%;height:100%;box-sizing:border-box;}
*,*:before,*:after{box-sizing:inherit;}
body{position:relative;min-height:100%;margin:0;line-height:1.65;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto', 'Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans', 'Helvetica Neue',sans-serif;font-size:16px;font-weight:400;min-width:320px;direction:ltr;font-feature-settings:'kern';text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-scroll-behavior:smooth;-moz-scroll-behavior:smooth;-ms-scroll-behavior:smooth;scroll-behavior:smooth;}
html,body{background-color:#fff;color:#111;}
::selection{background-color:#0076ff;color:#fff;}
[role='grid']:focus{outline:none;}
svg{text-rendering:optimizeLegibility;}
h1,h2,h3{margin:0;}
a{color:#2195ff;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}
a:hover{color:#68b5fb;}
code{font-size:0.9em;font-family:Menlo,Monaco,Lucida Console,Liberation Mono, DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace, serif;}
code:before,code:after{content:'`';}
pre code:before,pre code:after{content:none;}
.demo-footer .note code{background:rgba(0,0,0,0.2);padding:0.2rem;margin:0 0.1rem;border-radius:2px;}
iframe{width:100%;height:100%;border:none;}
.f-reset{font-size:1rem;}
.f0{font-size:1.802032470703125em;}
.f1{font-size:1.601806640625em;}
.f2{font-size:1.423828125em;}
.f3{font-size:1.265625em;}
.f4{font-size:1.125em;}
.f5{font-size:0.8888888888888888em;}
.f6{font-size:0.7901234567901234em;}
.fw1{font-weight:100;}
.fw2{font-weight:200;}
.fw3{font-weight:300;}
.fw4{font-weight:400;}
.fw5{font-weight:500;}
.fw6{font-weight:600;}
.fw7{font-weight:700;}
.fw8{font-weight:800;}
.fw9{font-weight:900;}
.subtitle{color:#999;}
.mute{color:#757575;}
.tc{text-align:center;}
.row{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 -1.5rem;}
.column{-webkit-flex:1;-ms-flex:1;flex:1;padding:0 1.5rem;}
.display-mobile{display:none;}
@media screen and (max-width:640px){.display-mobile{display:unset;}}
a[role='button']{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}
.no-tap-highlight,a{-webkit-touch-callout:none;-ms-touch-action:pan-y;touch-action:pan-y;-webkit-tap-highlight-color:transparent;}
.no-tap-callout{-webkit-touch-callout:none;}
.no-drag{-webkit-user-drag:none;-moz-user-drag:none;-ms-user-drag:none;user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-moz-user-select:none;-webkit-user-drag:none;-webkit-user-select:none;-ms-user-select:none;}
.visually-hidden{-webkit-clip:rect(0 0 0 0);clip:rect(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;border:0;overflow:hidden;position:absolute;}
code[class*='language-'],pre[class*='language-']{color:#000;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.4em;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}
.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#999;}
.token.namespace{opacity:0.7;}
.token.string{color:#028265;}
.token.attr-value,.token.punctuation,.token.operator{color:#000;}
.token.url,.token.symbol,.token.boolean,.token.variable,.token.constant,.token.inserted{color:#36acaa;}
.token.atrule,.language-autohotkey .token.selector,.language-json .token.boolean,code[class*='language-css']{font-weight:600;}
.language-json .token.boolean{color:#0076ff;}
.token.keyword{color:#ff0078;font-weight:bolder;}
.token.function,.token.tag,.token.class-name,.token.number{color:#0076ff;}
.token.deleted,.language-autohotkey .token.tag{color:#9a050f;}
.token.selector,.language-autohotkey .token.keyword{color:#00009f;}
.token.important,.token.bold{font-weight:bold;}
.token.italic{font-style:italic;}
.language-json .token.property,.language-markdown .token.title{color:#000;font-weight:bolder;}
.language-markdown .token.code{color:#0076ff;font-weight:normal;}
.language-markdown .token.list,.language-markdown .token.hr{color:#999;}
.language-markdown .token.url{color:#ff0078;font-weight:bolder;}
.token.selector{color:#2b91af;}
.token.property,.token.entity{color:#ff0000;}
.token.attr-name,.token.regex{color:#d9931e;}
.token.directive.tag .tag{background:#ffff00;color:#393a34;}
svg{shape-rendering:crispEdges;}
svg path,svg circle{shape-rendering:geometricprecision;}</style><style id="__jsx-3381436543">.jsx-3381436543{width:100%;margin:0 auto;padding:0 1rem;max-width: 1024px;  text-align: center;       ;}
.jsx-3381436543:after{content:'';display:table;clear:both;}
@media screen and (max-width:960px){div.jsx-3381436543{padding:0 2rem;}}
@media screen and (max-width:640px){div.jsx-3381436543{padding:0 1rem;;}}</style><style id="__jsx-2826385856">nav.jsx-2826385856{position:relative;-webkit-flex:1;-ms-flex:1;flex:1;height:64px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
nav.jsx-2826385856 .links.jsx-2826385856{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1;pointer-events:auto;}
nav.jsx-2826385856 .links.jsx-2826385856 a.jsx-2826385856{display:inline-block;padding:5px;margin-left:25px;margin-right:2rem;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}
nav.jsx-2826385856 .links.jsx-2826385856 a.jsx-2826385856:hover{color:#111;}
nav.jsx-2826385856 .links.jsx-2826385856 a.selected.jsx-2826385856{color:#0076ff;font-weight:600;}
nav.jsx-2826385856 .logo.jsx-2826385856{position:absolute;width:100%;font-size:0;text-align:center;overflow:hidden;-webkit-transition:all 0.2s ease;transition:all 0.2s ease;pointer-events:none;opacity:0;}
.active nav.jsx-2826385856 .logo.jsx-2826385856{pointer-events:unset;opacity:1;}
nav.jsx-2826385856 .logo.jsx-2826385856 a.jsx-2826385856{display:inline-block;}
nav.jsx-2826385856 .links.jsx-2826385856 .icons.jsx-2826385856{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
nav.jsx-2826385856 .links.jsx-2826385856 .icons.jsx-2826385856 a.jsx-2826385856{position:relative;line-height:1;margin-right:1rem;}
nav.jsx-2826385856 .links.jsx-2826385856 .icons.jsx-2826385856 a.jsx-2826385856 .badge.jsx-2826385856{position:absolute;display:inline-block;right:0px;bottom:4px;width:8px;height:8px;border-radius:4px;background-color:#2bdb66;pointer-events:none;}
nav.jsx-2826385856 .links.jsx-2826385856 .icons.jsx-2826385856 a.no-margin.jsx-2826385856{margin-right:0;}
@media screen and (max-width:640px){.logo.jsx-2826385856{display:none;}}</style><style id="__jsx-469375757">header.jsx-469375757{left:0;top:0;width:100%;height:64px;}
.fixed-container.jsx-469375757{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;left:0;background:rgba(255,255,255,0);z-index:1000;-webkit-transition:box-shadow 0.5s ease,background 0.2s ease;transition:box-shadow 0.5s ease,background 0.2s ease;}
.fixed.jsx-469375757{position:fixed;top:0px;pointer-events:none;}
.scrolled.jsx-469375757{position:fixed;top:0px;}
.active.jsx-469375757{background:rgba(255, 255, 255, 0.98);box-shadow: 0px 6px 20px rgba(0, 0, 0, 0.06); pointer-events:auto;}</style><style id="__jsx-201581576">.jsx-201581576{width:100%;margin:0 auto;padding:0 1rem;max-width: 1024px;         ;}
.jsx-201581576:after{content:'';display:table;clear:both;}
@media screen and (max-width:960px){div.jsx-201581576{padding:0 2rem;}}
@media screen and (max-width:640px){div.jsx-201581576{padding:0 1rem;;}}</style><style id="__jsx-2848946137">li.jsx-2848946137{list-style:none;}
.documentation__sidebar-heading.jsx-2848946137{display:inline-block;margin-top:1rem;margin-bottom:4px;color:#999;text-transform:uppercase;}
a.jsx-2848946137:hover{color:gray;}</style><style id="__jsx-1680998503">li.jsx-1680998503{list-style:none;}
a.jsx-1680998503{display:block;color:inherit;line-height:1.4;margin:0.4rem 0;padding: 5px 3px 5px 0; font-size: 15px;;}
a.jsx-1680998503:hover{color:gray;}
a.active.jsx-1680998503{font-weight:600;color:#0076ff;}</style><style id="__jsx-491881811">li.jsx-491881811{list-style:none;}
a.jsx-491881811{display:block;color:inherit;line-height:1.4;margin:0.4rem 0;padding: 3px 3px 3px 15px; font-size: 14px; color: #666;;}
a.jsx-491881811:hover{color:gray;}
a.active.jsx-491881811{font-weight:600;color:#0076ff;}</style><style id="__jsx-2841030312">ul.jsx-2841030312{margin:0 0 0.5rem 0;padding:0;}</style><style id="__jsx-1853639460">.documentation__sidebar.jsx-1853639460{width:312px;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;position:relative;padding-right:3rem;}
.documentation__sidebar.jsx-1853639460 nav.jsx-1853639460{position:fixed;overflow-y:auto;-webkit-overflow-scrolling:touch;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:18rem;padding:2rem 1rem 0 0;height:calc(100vh - 64px);}
@media screen and (max-width:640px){.documentation__sidebar.jsx-1853639460 nav.jsx-1853639460{position:unset;height:unset;width:100%;}}</style><style id="__jsx-3521603919">a.jsx-3521603919{color:inherit;}
a.jsx-3521603919:hover{color:inherit;border-bottom:1px dotted;}
h1[data-components-heading] a.jsx-3521603919::before{content:'# ';}
h2[data-components-heading] a.jsx-3521603919::before{content:'## ';}
h3[data-components-heading] a.jsx-3521603919::before{content:'### ';}
.lean[data-components-heading] a.jsx-3521603919::before{content:'';}
h1[data-components-heading]::before,h2[data-components-heading]::before,h3[data-components-heading]::before,h4[data-components-heading]::before{display:none;}
h3[data-components-heading]{border-top:1px solid #f3f3f3;padding-top:2rem;}
.target.jsx-3521603919{display:block;margin-top:-128px;padding-top:128px;visibility:hidden;position:absolute;}
.permalink.jsx-3521603919{text-align:center;vertical-align:middle;visibility:hidden;display:none;}
a.jsx-3521603919:hover~.permalink.jsx-3521603919{visibility:visible;}
@media (min-width:992px){a.jsx-3521603919{margin-right:10px;}.permalink.jsx-3521603919{display:inline-block;}}</style><style id="__jsx-3989962531">.jsx-3989962531{font-size:1.625rem;font-weight:500;}</style><style id="__jsx-2821545348">div.jsx-2821545348{margin:40px 0 0 0;}</style><style id="__jsx-2214628669">.jsx-2214628669{font-size:1.4rem;font-weight:600;}</style><style id="__jsx-3894000547">div.jsx-3894000547{margin:2rem 0 0 0;}</style><style id="__jsx-1031880288">pre.jsx-1031880288{padding:1.25rem;margin:40px 0;border:1px solid #d8d8d8;white-space:pre;overflow:auto;-webkit-overflow-scrolling:touch;}
code.jsx-1031880288{font-size:14px;line-height:20px;}</style><style id="__jsx-4016328902">code.jsx-4016328902{color:rgb(212,0,255);font-size:0.875em;white-space:pre-wrap;}
code.no-wrap.jsx-4016328902{white-space:nowrap;}
code.jsx-4016328902::before{content:'`';}
code.jsx-4016328902::after{content:'`';}
h2 code.jsx-4016328902,h3 code.jsx-4016328902,h4 code.jsx-4016328902,h5 code.jsx-4016328902{font-size:unset;color:inherit;}</style><style id="__jsx-2156832104">a.jsx-2156832104{color:inherit;font-size:inherit;border-bottom:1px dotted;}
a.jsx-2156832104:hover{color:gray;-webkit-text-decoration:none;text-decoration:none;}</style><style id="__jsx-329029718">a.jsx-329029718{-webkit-text-decoration:none;text-decoration:none;font-size:inherit;}</style><style id="__jsx-3235008975">.jsx-3235008975{font-size:1.15rem;font-weight:600;}</style><style id="__jsx-4030115387">summary.jsx-4030115387{cursor:pointer;outline:none;font-weight:500;}
summary.jsx-4030115387:hover{opacity:0.8;}</style><style id="__jsx-2868182892">.jsx-2868182892{margin:1rem 0;padding:0 0.5rem;background:#f9f9f9;overflow:hidden;}</style><style id="__jsx-2577077934">blockquote.jsx-2577077934{margin:2rem 0;padding:1rem 1.25rem;background:#f7f7f7;}
blockquote.jsx-2577077934 p{margin:0;}
blockquote.jsx-2577077934 pre{background:white;}</style><style id="__jsx-2038452597">.jsx-2038452597{font-size:1rem;font-weight:700;margin-top:2rem;}</style><style id="__jsx-1875527015">.documentation.jsx-1875527015{display:flex;}
.documentation__sidebar.jsx-1875527015{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}
.documentation__container.jsx-1875527015{-webkit-flex:1;-ms-flex:1;flex:1;padding-bottom:5rem;overflow:hidden;}
.documentation__header.jsx-1875527015 h1.jsx-1875527015{margin-top:0;}
.documentation__content.jsx-1875527015{width:100%;max-width:600px;}
@media screen and (max-width:640px){.documentation.jsx-1875527015{flex-direction: column;;}}</style><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Next.js</title><link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png"/><link rel="manifest" href="/static/favicon/site.webmanifest"/><link rel="mask-icon" href="/static/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/static/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/static/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/></head><body><div id="__next"><div class="jsx-2512323305"><header class="jsx-469375757"><div class="jsx-469375757 fixed-container active"><div class="jsx-3381436543 "><h1 class="visually-hidden" aria-hidden="true">Campus3D</h1><nav class="jsx-2826385856 f-reset"><div class="jsx-2826385856 links"><a title="Home" class="jsx-2826385856 mute" href="/index/">Home</a><a title="Visualization" class="jsx-2826385856 mute" href="https://vis.nus.app">Visualization</a><a title="Showcase" class="jsx-2826385856 mute" href="/showcase/">Showcase</a><a title="Description" class="jsx-2826385856 mute" href="/des/">Description</a><a title="Download" class="jsx-2826385856 mute" href="/download/">Download</a><a class="jsx-2826385856 mute" href="/blog/">Blog</a><a title="About" class="jsx-2826385856 mute" href="/about/">About</a><div class="jsx-2826385856 icons"><a aria-label="view our open source projects on GitHub" rel="noreferrer" target="_blank" class="jsx-2826385856" href="https://github.com/shinke-li/Campus3D/"><svg x="0px" y="0px" viewBox="0 0 16 16" width="16" height="16"><g fill="#111111"><path fill-rule="evenodd" clip-rule="evenodd" fill="#111111" d="M8,0.2c-4.4,0-8,3.6-8,8c0,3.5,2.3,6.5,5.5,7.6 C5.9,15.9,6,15.6,6,15.4c0-0.2,0-0.7,0-1.4C3.8,14.5,3.3,13,3.3,13c-0.4-0.9-0.9-1.2-0.9-1.2c-0.7-0.5,0.1-0.5,0.1-0.5 c0.8,0.1,1.2,0.8,1.2,0.8C4.4,13.4,5.6,13,6,12.8c0.1-0.5,0.3-0.9,0.5-1.1c-1.8-0.2-3.6-0.9-3.6-4c0-0.9,0.3-1.6,0.8-2.1 c-0.1-0.2-0.4-1,0.1-2.1c0,0,0.7-0.2,2.2,0.8c0.6-0.2,1.3-0.3,2-0.3c0.7,0,1.4,0.1,2,0.3c1.5-1,2.2-0.8,2.2-0.8 c0.4,1.1,0.2,1.9,0.1,2.1c0.5,0.6,0.8,1.3,0.8,2.1c0,3.1-1.9,3.7-3.7,3.9C9.7,12,10,12.5,10,13.2c0,1.1,0,1.9,0,2.2 c0,0.2,0.1,0.5,0.6,0.4c3.2-1.1,5.5-4.1,5.5-7.6C16,3.8,12.4,0.2,8,0.2z"></path></g></svg></a></div></div></nav></div></div></header><div class="jsx-201581576 "><div class="jsx-1875527015 documentation"><div class="jsx-1853639460 documentation__sidebar"><nav class="jsx-1853639460"><ul class="jsx-2841030312"><ul class="jsx-2841030312"><li class="jsx-2848946137"><a href="#how-to-use-nus-3d" class="jsx-2848946137 documentation__sidebar-heading f5">How to use NUS 3D</a></li><ul class="jsx-2841030312"><li class="jsx-1680998503"><a href="#setup" class="jsx-1680998503  f-reset">Setup</a></li><li class="jsx-1680998503"><a href="#automatic-code-splitting" class="jsx-1680998503  f-reset">Automatic code splitting</a></li><li class="jsx-1680998503"><a href="#css" class="jsx-1680998503  f-reset">CSS</a></li><ul class="jsx-2841030312"><li class="jsx-491881811"><a href="#built-in-css-support" class="jsx-491881811  f-reset">Built-in CSS support</a></li><li class="jsx-491881811"><a href="#css-in-js" class="jsx-491881811  f-reset">CSS-in-JS</a></li><li class="jsx-491881811"><a href="#importing-css--sass--less--stylus-files" class="jsx-491881811  f-reset">Importing CSS / Sass / Less / Stylus files</a></li></ul><li class="jsx-1680998503"><a href="#static-file-serving-eg-images" class="jsx-1680998503  f-reset">Static file serving (e.g.: images)</a></li><li class="jsx-1680998503"><a href="#populating-head" class="jsx-1680998503  f-reset">Populating &lt;head&gt;</a></li><li class="jsx-1680998503"><a href="#fetching-data-and-component-lifecycle" class="jsx-1680998503  f-reset">Fetching data and component lifecycle</a></li><li class="jsx-1680998503"><a href="#routing" class="jsx-1680998503  f-reset">Routing</a></li><ul class="jsx-2841030312"><li class="jsx-491881811"><a href="#with-link" class="jsx-491881811  f-reset">With &lt;Link&gt;</a></li><li class="jsx-491881811"><a href="#imperatively" class="jsx-491881811  f-reset">Imperatively</a></li><li class="jsx-491881811"><a href="#intercepting-popstate" class="jsx-491881811  f-reset">Intercepting popstate</a></li><li class="jsx-491881811"><a href="#using-a-higher-order-component" class="jsx-491881811  f-reset">Using a Higher Order Component</a></li></ul><li class="jsx-1680998503"><a href="#prefetching-pages" class="jsx-1680998503  f-reset">Prefetching Pages</a></li><ul class="jsx-2841030312"><li class="jsx-491881811"><a href="#with-link-1" class="jsx-491881811  f-reset">With &lt;Link&gt;</a></li><li class="jsx-491881811"><a href="#imperatively-1" class="jsx-491881811  f-reset">Imperatively</a></li></ul><li class="jsx-1680998503"><a href="#custom-server-and-routing" class="jsx-1680998503  f-reset">Custom server and routing</a></li><ul class="jsx-2841030312"><li class="jsx-491881811"><a href="#disabling-file-system-routing" class="jsx-491881811  f-reset">Disabling file-system routing</a></li><li class="jsx-491881811"><a href="#dynamic-assetprefix" class="jsx-491881811  f-reset">Dynamic assetPrefix</a></li></ul><li class="jsx-1680998503"><a href="#dynamic-import" class="jsx-1680998503  f-reset">Dynamic Import</a></li><ul class="jsx-2841030312"><li class="jsx-491881811"><a href="#1-basic-usage-also-does-ssr" class="jsx-491881811  f-reset">1. Basic Usage (Also does SSR)</a></li><li class="jsx-491881811"><a href="#2-with-custom-loading-component" class="jsx-491881811  f-reset">2. With Custom Loading Component</a></li><li class="jsx-491881811"><a href="#3-with-no-ssr" class="jsx-491881811  f-reset">3. With No SSR</a></li><li class="jsx-491881811"><a href="#4-with-multiple-modules-at-once" class="jsx-491881811  f-reset">4. With Multiple Modules At Once</a></li></ul><li class="jsx-1680998503"><a href="#custom-app" class="jsx-1680998503  f-reset">Custom &lt;App&gt;</a></li><li class="jsx-1680998503"><a href="#custom-document" class="jsx-1680998503  f-reset">Custom &lt;Document&gt;</a></li><li class="jsx-1680998503"><a href="#custom-error-handling" class="jsx-1680998503  f-reset">Custom error handling</a></li><li class="jsx-1680998503"><a href="#reusing-the-built-in-error-page" class="jsx-1680998503  f-reset">Reusing the built-in error page</a></li><li class="jsx-1680998503"><a href="#custom-configuration" class="jsx-1680998503  f-reset">Custom configuration</a></li><ul class="jsx-2841030312"><li class="jsx-491881811"><a href="#setting-a-custom-build-directory" class="jsx-491881811  f-reset">Setting a custom build directory</a></li><li class="jsx-491881811"><a href="#disabling-etag-generation" class="jsx-491881811  f-reset">Disabling etag generation</a></li><li class="jsx-491881811"><a href="#configuring-the-ondemandentries" class="jsx-491881811  f-reset">Configuring the onDemandEntries</a></li><li class="jsx-491881811"><a href="#configuring-extensions-looked-for-when-resolving-pages-in-pages" class="jsx-491881811  f-reset">Configuring extensions looked for when resolving pages in pages</a></li><li class="jsx-491881811"><a href="#configuring-the-build-id" class="jsx-491881811  f-reset">Configuring the build ID</a></li></ul><li class="jsx-1680998503"><a href="#customizing-webpack-config" class="jsx-1680998503  f-reset">Customizing webpack config</a></li><li class="jsx-1680998503"><a href="#customizing-babel-config" class="jsx-1680998503  f-reset">Customizing babel config</a></li><li class="jsx-1680998503"><a href="#exposing-configuration-to-the-server--client-side" class="jsx-1680998503  f-reset">Exposing configuration to the server / client side</a></li><li class="jsx-1680998503"><a href="#starting-the-server-on-alternative-hostname" class="jsx-1680998503  f-reset">Starting the server on alternative hostname</a></li><li class="jsx-1680998503"><a href="#cdn-support-with-asset-prefix" class="jsx-1680998503  f-reset">CDN support with Asset Prefix</a></li></ul><li class="jsx-2848946137"><a href="#production-deployment" class="jsx-2848946137 documentation__sidebar-heading f5">Production deployment</a></li><li class="jsx-2848946137"><a href="#browser-support" class="jsx-2848946137 documentation__sidebar-heading f5">Browser support</a></li><li class="jsx-2848946137"><a href="#static-html-export" class="jsx-2848946137 documentation__sidebar-heading f5">Static HTML export</a></li><ul class="jsx-2841030312"><li class="jsx-1680998503"><a href="#usage" class="jsx-1680998503  f-reset">Usage</a></li><li class="jsx-1680998503"><a href="#copying-custom-files" class="jsx-1680998503  f-reset">Copying custom files</a></li><li class="jsx-1680998503"><a href="#limitation" class="jsx-1680998503  f-reset">Limitation</a></li></ul><li class="jsx-2848946137"><a href="#multi-zones" class="jsx-2848946137 documentation__sidebar-heading f5">Multi Zones</a></li><ul class="jsx-2841030312"><li class="jsx-1680998503"><a href="#how-to-define-a-zone" class="jsx-1680998503  f-reset">How to define a zone</a></li><li class="jsx-1680998503"><a href="#how-to-merge-them" class="jsx-1680998503  f-reset">How to merge them</a></li></ul><li class="jsx-2848946137"><a href="#recipes" class="jsx-2848946137 documentation__sidebar-heading f5">Recipes</a></li><li class="jsx-2848946137"><a href="#faq" class="jsx-2848946137 documentation__sidebar-heading f5">FAQ</a></li><li class="jsx-2848946137"><a href="#contributing" class="jsx-2848946137 documentation__sidebar-heading f5">Contributing</a></li><li class="jsx-2848946137"><a href="#authors" class="jsx-2848946137 documentation__sidebar-heading f5">Authors</a></li></ul></ul></nav></div><div class="jsx-1875527015 documentation__container"><div class="jsx-1875527015 documentation__content"><div><div class="jsx-2821545348"><h2 class="jsx-3989962531 lean " data-components-heading="true"><span id="how-to-use-nus-3d" class="jsx-3521603919 target docs-anchor-target"></span><a href="#how-to-use-nus-3d" class="jsx-3521603919">How to use NUS 3D</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h2></div><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="setup" class="jsx-3521603919 target docs-anchor-target"></span><a href="#setup" class="jsx-3521603919">Setup</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>Install it:</p><pre class="language-bash"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token function">npm</span> <span class="token function">install</span> --save next react react-dom
</code></pre></pre><p>and add a script to your package.json like this:</p><pre class="language-json"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next start&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>After that, the file-system is the main API. Every <code class="jsx-4016328902 ">.js</code> file becomes a route that gets automatically processed and rendered.</p><p>Populate <code class="jsx-4016328902 ">./pages/index.js</code> inside your project:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Welcome to next.js!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></pre><p>and then just run <code class="jsx-4016328902 ">npm run dev</code> and go to <code class="jsx-4016328902 ">http://localhost:3000</code>. To use another port, you can run <code class="jsx-4016328902 ">npm run dev -- -p &lt;your port here&gt;</code>.</p><p>So far, we get:</p><ul><li>Automatic transpilation and bundling (with webpack and babel)</li><li>Hot code reloading</li><li>Server rendering and indexing of <code class="jsx-4016328902 ">./pages</code></li><li>Static file serving. <code class="jsx-4016328902 ">./static/</code> is mapped to <code class="jsx-4016328902 ">/static/</code> (given you <a href="#static-file-serving-eg-images" class="jsx-2156832104">create a <code class="jsx-4016328902 ">./static/</code> directory</a> inside your project)</li></ul><p>To see how simple this is, check out the <a href="https://github.com/zeit/nextgram" target="_blank" rel="noopener noreferrer" class="jsx-329029718">sample app - nextgram</a></p><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="automatic-code-splitting" class="jsx-3521603919 target docs-anchor-target"></span><a href="#automatic-code-splitting" class="jsx-3521603919">Automatic code splitting</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>Every <code class="jsx-4016328902 ">import</code> you declare gets bundled and served with each page. That means pages never load unnecessary code!</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> cowsay <span class="token keyword">from</span> <span class="token string">&#x27;cowsay-browser&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>cowsay<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">&#x27;hi there!&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="css" class="jsx-3521603919 target docs-anchor-target"></span><a href="#css" class="jsx-3521603919">CSS</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="built-in-css-support" class="jsx-3521603919 target docs-anchor-target"></span><a href="#built-in-css-support" class="jsx-3521603919">Built-in CSS support</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/basic-css">Basic css</a></li></ul></details><p>We bundle <a href="https://github.com/zeit/styled-jsx" target="_blank" rel="noopener noreferrer" class="jsx-329029718">styled-jsx</a> to provide support for isolated scoped CSS. The aim is to support &quot;shadow CSS&quot; similar to Web Components, which unfortunately <a href="https://github.com/w3c/webcomponents/issues/71" target="_blank" rel="noopener noreferrer" class="jsx-329029718">do not support server-rendering and are JS-only</a>.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    Hello world
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">scoped!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">jsx</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{`
      p {
        color: blue;
      }
      div {
        background: red;
      }
      @media (max-width: 600px) {
        div {
          background: blue;
        }
      }
    `}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">global</span> <span class="token attr-name">jsx</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{`
      body {
        background: black;
      }
    `}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><p>Please see the <a href="https://www.npmjs.com/package/styled-jsx" target="_blank" rel="noopener noreferrer" class="jsx-329029718">styled-jsx documentation</a> for more examples.</p><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="css-in-js" class="jsx-3521603919 target docs-anchor-target"></span><a href="#css-in-js" class="jsx-3521603919">CSS-in-JS</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-styled-components">Styled components</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-styletron">Styletron</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-glamor">Glamor</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-glamorous">Glamorous</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-cxs">Cxs</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-aphrodite">Aphrodite</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-fela">Fela</a></li></ul></details><p>It&#x27;s possible to use any existing CSS-in-JS solution. The simplest one is inline styles:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&#x27;red&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hi there</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></pre><p>To use more sophisticated CSS-in-JS solutions, you typically have to implement style flushing for server-side rendering. We enable this by allowing you to define your own <a href="#user-content-custom-document" class="jsx-2156832104">custom <code class="jsx-4016328902 ">&lt;Document&gt;</code></a> component that wraps each page.</p><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="importing-css--sass--less--stylus-files" class="jsx-3521603919 target docs-anchor-target"></span><a href="#importing-css--sass--less--stylus-files" class="jsx-3521603919">Importing CSS / Sass / Less / Stylus files</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>To support importing <code class="jsx-4016328902 ">.css</code>, <code class="jsx-4016328902 ">.scss</code>, <code class="jsx-4016328902 ">.less</code> or <code class="jsx-4016328902 ">.styl</code> files you can use these modules, which configure sensible defaults for server rendered applications.</p><ul><li><a href="https://github.com/zeit/next-plugins/tree/master/packages/next-css" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@zeit/next-css</a></li><li><a href="https://github.com/zeit/next-plugins/tree/master/packages/next-sass" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@zeit/next-sass</a></li><li><a href="https://github.com/zeit/next-plugins/tree/master/packages/next-less" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@zeit/next-less</a></li><li><a href="https://github.com/zeit/next-plugins/tree/master/packages/next-stylus" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@zeit/next-stylus</a></li></ul><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="static-file-serving-eg-images" class="jsx-3521603919 target docs-anchor-target"></span><a href="#static-file-serving-eg-images" class="jsx-3521603919">Static file serving (e.g.: images)</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>Create a folder called <code class="jsx-4016328902 ">static</code> in your project root directory. From your code you can then reference those files with <code class="jsx-4016328902 ">/static/</code> URLs:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/static/my-image.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>my image<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></pre><p><em>Note: Don&#x27;t name the <code class="jsx-4016328902 ">static</code> directory anything else. The name is required and is the only directory that Next.js uses for serving static assets.</em></p><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="populating-head" class="jsx-3521603919 target docs-anchor-target"></span><a href="#populating-head" class="jsx-3521603919">Populating <code class="jsx-4016328902 ">&lt;head&gt;</code></a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/head-elements">Head elements</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/layout-component">Layout component</a></li></ul></details><p>We expose a built-in component for appending elements to the <code class="jsx-4016328902 ">&lt;head&gt;</code> of the page.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> Head <span class="token keyword">from</span> <span class="token string">&#x27;next/head&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">My page title</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>initial-scale=1.0, width=device-width<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello world!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><p>To avoid duplicate tags in your <code class="jsx-4016328902 ">&lt;head&gt;</code> you can use the <code class="jsx-4016328902 ">key</code> property, which will make sure the tag is only rendered once:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> Head <span class="token keyword">from</span> <span class="token string">&#x27;next/head&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">My page title</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>initial-scale=1.0, width=device-width<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>initial-scale=1.2, width=device-width<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello world!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><p>In this case only the second <code class="jsx-4016328902 ">&lt;meta name=&quot;viewport&quot; /&gt;</code> is rendered.</p><p><em>Note: The contents of <code class="jsx-4016328902 ">&lt;head&gt;</code> get cleared upon unmounting the component, so make sure each page completely defines what it needs in <code class="jsx-4016328902 ">&lt;head&gt;</code>, without making assumptions about what other pages added</em></p><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="fetching-data-and-component-lifecycle" class="jsx-3521603919 target docs-anchor-target"></span><a href="#fetching-data-and-component-lifecycle" class="jsx-3521603919">Fetching data and component lifecycle</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/data-fetch">Data fetch</a></li></ul></details><p>When you need state, lifecycle hooks or <strong>initial data population</strong> you can export a <code class="jsx-4016328902 ">React.Component</code> (instead of a stateless function, like shown above):</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> React<span class="token punctuation">.</span>Component <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInitialProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> userAgent <span class="token operator">=</span> req <span class="token operator">?</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&#x27;user-agent&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> navigator<span class="token punctuation">.</span>userAgent
    <span class="token keyword">return</span> <span class="token punctuation">{</span> userAgent <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        Hello World </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>userAgent<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>Notice that to load data when the page loads, we use <code class="jsx-4016328902 ">getInitialProps</code> which is an <a href="https://zeit.co/blog/async-and-await" target="_blank" rel="noopener noreferrer" class="jsx-329029718"><code class="jsx-4016328902 ">async</code></a> static method. It can asynchronously fetch anything that resolves to a JavaScript plain <code class="jsx-4016328902 ">Object</code>, which populates <code class="jsx-4016328902 ">props</code>.</p><p>Data returned from <code class="jsx-4016328902 ">getInitialProps</code> is serialized when server rendering, similar to a <code class="jsx-4016328902 ">JSON.stringify</code>. Make sure the returned object from <code class="jsx-4016328902 ">getInitialProps</code> is a plain <code class="jsx-4016328902 ">Object</code> and not using <code class="jsx-4016328902 ">Date</code>, <code class="jsx-4016328902 ">Map</code> or <code class="jsx-4016328902 ">Set</code>.</p><p>For the initial page load, <code class="jsx-4016328902 ">getInitialProps</code> will execute on the server only. <code class="jsx-4016328902 ">getInitialProps</code> will only be executed on the client when navigating to a different route via the <code class="jsx-4016328902 ">Link</code> component or using the routing APIs.</p><p><em>Note: <code class="jsx-4016328902 ">getInitialProps</code> can <strong>not</strong> be used in children components. Only in <code class="jsx-4016328902 ">pages</code>.</em></p><br/><blockquote class="jsx-2577077934 "><p>If you are using some server only modules inside <code class="jsx-4016328902 ">getInitialProps</code>, make sure to <a href="https://arunoda.me/blog/ssr-and-server-only-modules" target="_blank" rel="noopener noreferrer" class="jsx-329029718">import them properly</a>.
Otherwise, it&#x27;ll slow down your app.</p></blockquote><br/><p>You can also define the <code class="jsx-4016328902 ">getInitialProps</code> lifecycle method for stateless components:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">const</span> <span class="token function-variable function">Page</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> stars <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    Next stars: </span><span class="token punctuation">{</span>stars<span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

Page<span class="token punctuation">.</span>getInitialProps <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;https://api.github.com/repos/zeit/next.js&#x27;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> stars<span class="token punctuation">:</span> json<span class="token punctuation">.</span>stargazers_count <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Page
</code></pre></pre><p><code class="jsx-4016328902 ">getInitialProps</code> receives a context object with the following properties:</p><ul><li><code class="jsx-4016328902 ">pathname</code> - path section of URL</li><li><code class="jsx-4016328902 ">query</code> - query string section of URL parsed as an object</li><li><code class="jsx-4016328902 ">asPath</code> - <code class="jsx-4016328902 ">String</code> of the actual path (including the query) shows in the browser</li><li><code class="jsx-4016328902 ">req</code> - HTTP request object (server only)</li><li><code class="jsx-4016328902 ">res</code> - HTTP response object (server only)</li><li><code class="jsx-4016328902 ">jsonPageRes</code> - <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noopener noreferrer" class="jsx-329029718">Fetch Response</a> object (client only)</li><li><code class="jsx-4016328902 ">err</code> - Error object if any error is encountered during the rendering</li></ul><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="routing" class="jsx-3521603919 target docs-anchor-target"></span><a href="#routing" class="jsx-3521603919">Routing</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="with-link" class="jsx-3521603919 target docs-anchor-target"></span><a href="#with-link" class="jsx-3521603919">With <code class="jsx-4016328902 ">&lt;Link&gt;</code></a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/hello-world">Hello World</a></li></ul></details><p>Client-side transitions between routes can be enabled via a <code class="jsx-4016328902 ">&lt;Link&gt;</code> component. Consider these two pages:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// pages/index.js</span>
<span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&#x27;next/link&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    Click</span><span class="token punctuation">{</span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">here</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">}</span><span class="token plain-text">
    to read more
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// pages/about.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Welcome to About!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></pre><p><strong>Note: use <a href="#prefetching-pages" class="jsx-2156832104"><code class="jsx-4016328902 ">&lt;Link prefetch&gt;</code></a> for maximum performance, to link and prefetch in the background at the same time</strong></p><p>Client-side routing behaves exactly like the browser:</p><ol><li>The component is fetched</li><li>If it defines <code class="jsx-4016328902 ">getInitialProps</code>, data is fetched. If an error occurs, <code class="jsx-4016328902 ">_error.js</code> is rendered</li><li>After 1 and 2 complete, <code class="jsx-4016328902 ">pushState</code> is performed and the new component is rendered</li></ol><p>To inject the <code class="jsx-4016328902 ">pathname</code>, <code class="jsx-4016328902 ">query</code> or <code class="jsx-4016328902 ">asPath</code> in your component, you can use <a href="#using-a-higher-order-component" class="jsx-2156832104">withRouter</a>.</p><h5 class="jsx-2038452597 ">With URL object</h5><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-url-object-routing">With URL Object Routing</a></li></ul></details><p>The component <code class="jsx-4016328902 ">&lt;Link&gt;</code> can also receive an URL object and it will automatically format it to create the URL string.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// pages/index.js</span>
<span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&#x27;next/link&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    Click</span><span class="token punctuation">{</span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> pathname<span class="token punctuation">:</span> <span class="token string">&#x27;/about&#x27;</span><span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&#x27;Zeit&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">here</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">}</span><span class="token plain-text">
    to read more
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><p>That will generate the URL string <code class="jsx-4016328902 ">/about?name=Zeit</code>, you can use every property as defined in the <a href="https://nodejs.org/api/url.html#url_url_strings_and_url_objects" target="_blank" rel="noopener noreferrer" class="jsx-329029718">Node.js URL module documentation</a>.</p><h5 class="jsx-2038452597 ">Replace instead of push url</h5><p>The default behaviour for the <code class="jsx-4016328902 ">&lt;Link&gt;</code> component is to <code class="jsx-4016328902 ">push</code> a new url into the stack. You can use the <code class="jsx-4016328902 ">replace</code> prop to prevent adding a new entry.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// pages/index.js</span>
<span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&#x27;next/link&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    Click</span><span class="token punctuation">{</span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">replace</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">here</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">}</span><span class="token plain-text">
    to read more
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><h5 class="jsx-2038452597 ">Using a component that supports <code class="jsx-4016328902 ">onClick</code></h5><p><code class="jsx-4016328902 ">&lt;Link&gt;</code> supports any component that supports the <code class="jsx-4016328902 ">onClick</code> event. In case you don&#x27;t provide an <code class="jsx-4016328902 ">&lt;a&gt;</code> tag, it will only add the <code class="jsx-4016328902 ">onClick</code> event handler and won&#x27;t pass the <code class="jsx-4016328902 ">href</code> property.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// pages/index.js</span>
<span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&#x27;next/link&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    Click</span><span class="token punctuation">{</span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/static/image.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><h5 class="jsx-2038452597 ">Forcing the Link to expose <code class="jsx-4016328902 ">href</code> to its child</h5><p>If child is an <code class="jsx-4016328902 ">&lt;a&gt;</code> tag and doesn&#x27;t have a href attribute we specify it so that the repetition is not needed by the user. However, sometimes, you’ll want to pass an <code class="jsx-4016328902 ">&lt;a&gt;</code> tag inside of a wrapper and the <code class="jsx-4016328902 ">Link</code> won’t recognize it as a <em>hyperlink</em>, and, consequently, won’t transfer its <code class="jsx-4016328902 ">href</code> to the child. In cases like that, you should define a boolean <code class="jsx-4016328902 ">passHref</code> property to the <code class="jsx-4016328902 ">Link</code>, forcing it to expose its <code class="jsx-4016328902 ">href</code> property to the child.</p><p><strong>Please note</strong>: using a tag other than <code class="jsx-4016328902 ">a</code> and failing to pass <code class="jsx-4016328902 ">passHref</code> may result in links that appear to navigate correctly, but, when being crawled by search engines, will not be recognized as links (owing to the lack of <code class="jsx-4016328902 ">href</code> attribute). This may result in negative effects on your sites SEO.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&#x27;next/link&#x27;</span>
<span class="token keyword">import</span> Unexpected_A <span class="token keyword">from</span> <span class="token string">&#x27;third-library&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> href<span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>href<span class="token punctuation">}</span></span> <span class="token attr-name">passHref</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Unexpected_A</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Unexpected_A</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><h5 class="jsx-2038452597 ">Disabling the scroll changes to top on page</h5><p>The default behaviour of <code class="jsx-4016328902 ">&lt;Link&gt;</code> is to scroll to the top of the page. When there is a hash defined it will scroll to the specific id, just like a normal <code class="jsx-4016328902 ">&lt;a&gt;</code> tag. To prevent scrolling to the top / hash <code class="jsx-4016328902 ">scroll={false}</code> can be added to <code class="jsx-4016328902 ">&lt;Link&gt;</code>:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">scroll</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/?counter=10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Disables scrolling</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/?counter=10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Changes with scrolling to top</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="imperatively" class="jsx-3521603919 target docs-anchor-target"></span><a href="#imperatively" class="jsx-3521603919">Imperatively</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/using-router">Basic routing</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-loading">With a page loading indicator</a></li></ul></details><p>You can also do client-side page transitions using the <code class="jsx-4016328902 ">next/router</code></p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">&#x27;next/router&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    Click </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#x27;/about&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">here</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> to read more
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="intercepting-popstate" class="jsx-3521603919 target docs-anchor-target"></span><a href="#intercepting-popstate" class="jsx-3521603919">Intercepting <code class="jsx-4016328902 ">popstate</code></a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>In some cases (for example, if using a <a href="#custom-server-and-routing" class="jsx-2156832104">custom router</a>), you may wish
to listen to <a href="https://developer.mozilla.org/en-US/docs/Web/Events/popstate" target="_blank" rel="noopener noreferrer" class="jsx-329029718"><code class="jsx-4016328902 ">popstate</code></a> and react before the router acts on it.
For example, you could use this to manipulate the request, or force an SSR refresh.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">&#x27;next/router&#x27;</span>

Router<span class="token punctuation">.</span><span class="token function">beforePopState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> <span class="token keyword">as</span><span class="token punctuation">,</span> options <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// I only want to allow these two routes!</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">as</span> <span class="token operator">!==</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">||</span> <span class="token keyword">as</span> <span class="token operator">!==</span> <span class="token string">&quot;/other&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Have SSR render bad routes as a 404.</span>
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token keyword">as</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></pre><p>If you return a falsy value from <code class="jsx-4016328902 ">beforePopState</code>, <code class="jsx-4016328902 ">Router</code> will not handle <code class="jsx-4016328902 ">popstate</code>;
you&#x27;ll be responsible for handling it, in that case.
See <a href="#disabling-file-system-routing" class="jsx-2156832104">Disabling File-System Routing</a>.</p><p>Above <code class="jsx-4016328902 ">Router</code> object comes with the following API:</p><ul><li><code class="jsx-4016328902 ">route</code> - <code class="jsx-4016328902 ">String</code> of the current route</li><li><code class="jsx-4016328902 ">pathname</code> - <code class="jsx-4016328902 ">String</code> of the current path excluding the query string</li><li><code class="jsx-4016328902 ">query</code> - <code class="jsx-4016328902 ">Object</code> with the parsed query string. Defaults to <code class="jsx-4016328902 ">{}</code></li><li><code class="jsx-4016328902 ">asPath</code> - <code class="jsx-4016328902 ">String</code> of the actual path (including the query) shows in the browser</li><li><code class="jsx-4016328902 ">push(url, as=url)</code> - performs a <code class="jsx-4016328902 ">pushState</code> call with the given url</li><li><code class="jsx-4016328902 ">replace(url, as=url)</code> - performs a <code class="jsx-4016328902 ">replaceState</code> call with the given url</li><li><code class="jsx-4016328902 ">beforePopState(cb=function)</code> - intercept popstate before router processes the event.</li></ul><p>The second <code class="jsx-4016328902 ">as</code> parameter for <code class="jsx-4016328902 ">push</code> and <code class="jsx-4016328902 ">replace</code> is an optional <em>decoration</em> of the URL. Useful if you configured custom routes on the server.</p><h5 class="jsx-2038452597 ">With URL object</h5><p>You can use an URL object the same way you use it in a <code class="jsx-4016328902 ">&lt;Link&gt;</code> component to <code class="jsx-4016328902 ">push</code> and <code class="jsx-4016328902 ">replace</code> an URL.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">&#x27;next/router&#x27;</span>

<span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  Router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    pathname<span class="token punctuation">:</span> <span class="token string">&#x27;/about&#x27;</span><span class="token punctuation">,</span>
    query<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&#x27;Zeit&#x27;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    Click </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">here</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> to read more
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><p>This uses the same exact parameters as in the <code class="jsx-4016328902 ">&lt;Link&gt;</code> component.</p><h5 class="jsx-2038452597 ">Router Events</h5><p>You can also listen to different events happening inside the Router.
Here&#x27;s a list of supported events:</p><ul><li><code class="jsx-4016328902 ">routeChangeStart(url)</code> - Fires when a route starts to change</li><li><code class="jsx-4016328902 ">routeChangeComplete(url)</code> - Fires when a route changed completely</li><li><code class="jsx-4016328902 ">routeChangeError(err, url)</code> - Fires when there&#x27;s an error when changing routes</li><li><code class="jsx-4016328902 ">beforeHistoryChange(url)</code> - Fires just before changing the browser&#x27;s history</li><li><code class="jsx-4016328902 ">hashChangeStart(url)</code> - Fires when the hash will change but not the page</li><li><code class="jsx-4016328902 ">hashChangeComplete(url)</code> - Fires when the hash has changed but not the page</li></ul><blockquote class="jsx-2577077934 "><p>Here <code class="jsx-4016328902 ">url</code> is the URL shown in the browser. If you call <code class="jsx-4016328902 ">Router.push(url, as)</code> (or similar), then the value of <code class="jsx-4016328902 ">url</code> will be <code class="jsx-4016328902 ">as</code>.</p></blockquote><p>Here&#x27;s how to properly listen to the router event <code class="jsx-4016328902 ">routeChangeStart</code>:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">const</span> <span class="token function-variable function">handleRouteChange</span> <span class="token operator">=</span> url <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;App is changing to: &#x27;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

Router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#x27;routeChangeStart&#x27;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
</code></pre></pre><p>If you no longer want to listen to that event, you can unsubscribe with the <code class="jsx-4016328902 ">off</code> method:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288">Router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#x27;routeChangeStart&#x27;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
</code></pre></pre><p>If a route load is cancelled (for example by clicking two links rapidly in succession), <code class="jsx-4016328902 ">routeChangeError</code> will fire. The passed <code class="jsx-4016328902 ">err</code> will contain a <code class="jsx-4016328902 ">cancelled</code> property set to <code class="jsx-4016328902 ">true</code>.</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288">Router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#x27;routeChangeError&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> url<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>cancelled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Route to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was cancelled!`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></pre><h5 class="jsx-2038452597 ">Shallow Routing</h5><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-shallow-routing">Shallow Routing</a></li></ul></details><p>Shallow routing allows you to change the URL without running <code class="jsx-4016328902 ">getInitialProps</code>. You&#x27;ll receive the updated <code class="jsx-4016328902 ">pathname</code> and the <code class="jsx-4016328902 ">query</code> via the <code class="jsx-4016328902 ">url</code> prop of the same page that&#x27;s loaded, without losing state.</p><p>You can do this by invoking either <code class="jsx-4016328902 ">Router.push</code> or <code class="jsx-4016328902 ">Router.replace</code> with the <code class="jsx-4016328902 ">shallow: true</code> option. Here&#x27;s an example:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// Current URL is &quot;/&quot;</span>
<span class="token keyword">const</span> href <span class="token operator">=</span> <span class="token string">&#x27;/?counter=10&#x27;</span>
<span class="token keyword">const</span> <span class="token keyword">as</span> <span class="token operator">=</span> href
Router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>href<span class="token punctuation">,</span> <span class="token keyword">as</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> shallow<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></pre><p>Now, the URL is updated to <code class="jsx-4016328902 ">/?counter=10</code>. You can see the updated URL with <code class="jsx-4016328902 ">this.props.router.query</code> inside the <code class="jsx-4016328902 ">Component</code> (make sure you are using <a href="#using-a-higher-order-component" class="jsx-2156832104"><code class="jsx-4016328902 ">withRouter</code></a> around your <code class="jsx-4016328902 ">Component</code> to inject the <code class="jsx-4016328902 ">router</code> prop).</p><p>You can watch for URL changes via <a href="https://reactjs.org/docs/react-component.html#componentdidupdate" target="_blank" rel="noopener noreferrer" class="jsx-329029718"><code class="jsx-4016328902 ">componentDidUpdate</code></a> hook as shown below:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pathname<span class="token punctuation">,</span> query <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>router
  <span class="token comment">// verify props have changed to avoid an infinite loop</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span>id <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span>router<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// fetch data based on the new query</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><blockquote class="jsx-2577077934 "><p>NOTES:</p><p>Shallow routing works <strong>only</strong> for same page URL changes. For an example, let&#x27;s assume we have another page called <code class="jsx-4016328902 ">about</code>, and you run this:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288">Router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#x27;/?counter=10&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;/about?counter=10&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> shallow<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></pre><p>Since that&#x27;s a new page, it&#x27;ll unload the current page, load the new one and call <code class="jsx-4016328902 ">getInitialProps</code> even though we asked to do shallow routing.</p></blockquote><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="using-a-higher-order-component" class="jsx-3521603919 target docs-anchor-target"></span><a href="#using-a-higher-order-component" class="jsx-3521603919">Using a Higher Order Component</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/using-with-router">Using the `withRouter` utility</a></li></ul></details><p>If you want to access the <code class="jsx-4016328902 ">router</code> object inside any component in your app, you can use the <code class="jsx-4016328902 ">withRouter</code> Higher-Order Component. Here&#x27;s how to use it:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;next/router&#x27;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ActiveLink</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> children<span class="token punctuation">,</span> router<span class="token punctuation">,</span> href <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
    marginRight<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> router<span class="token punctuation">.</span>pathname <span class="token operator">===</span> href<span class="token operator">?</span> <span class="token string">&#x27;red&#x27;</span> <span class="token punctuation">:</span> <span class="token string">&#x27;black&#x27;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>href<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>ActiveLink<span class="token punctuation">)</span>
</code></pre></pre><p>The above <code class="jsx-4016328902 ">router</code> object comes with an API similar to <a href="#imperatively" class="jsx-2156832104"><code class="jsx-4016328902 ">next/router</code></a>.</p><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="prefetching-pages" class="jsx-3521603919 target docs-anchor-target"></span><a href="#prefetching-pages" class="jsx-3521603919">Prefetching Pages</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>⚠️ This is a production only feature ⚠️</p><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-prefetching">Prefetching</a></li></ul></details><p>Next.js has an API which allows you to prefetch pages.</p><p>Since Next.js server-renders your pages, this allows all the future interaction paths of your app to be instant. Effectively Next.js gives you the great initial download performance of a <em>website</em>, with the ahead-of-time download capabilities of an <em>app</em>. <a href="https://zeit.co/blog/next#anticipation-is-the-key-to-performance" target="_blank" rel="noopener noreferrer" class="jsx-329029718">Read more</a>.</p><blockquote class="jsx-2577077934 "><p>With prefetching Next.js only downloads JS code. When the page is getting rendered, you may need to wait for the data.</p></blockquote><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="with-link-1" class="jsx-3521603919 target docs-anchor-target"></span><a href="#with-link-1" class="jsx-3521603919">With <code class="jsx-4016328902 ">&lt;Link&gt;</code></a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>You can add <code class="jsx-4016328902 ">prefetch</code> prop to any <code class="jsx-4016328902 ">&lt;Link&gt;</code> and Next.js will prefetch those pages in the background.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&#x27;next/link&#x27;</span>

<span class="token comment">// example header component</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">prefetch</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">prefetch</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">prefetch</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/contact<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Contact</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="imperatively-1" class="jsx-3521603919 target docs-anchor-target"></span><a href="#imperatively-1" class="jsx-3521603919">Imperatively</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>Most prefetching needs are addressed by <code class="jsx-4016328902 ">&lt;Link /&gt;</code>, but we also expose an imperative API for advanced usage:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;next/router&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> router <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#x27;/dynamic&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      A route transition will happen after 100ms
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token comment">// but we can prefetch it!</span>
    router<span class="token punctuation">.</span><span class="token function">prefetch</span><span class="token punctuation">(</span><span class="token string">&#x27;/dynamic&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><p>The router instance should be only used inside the client side of your app though. In order to prevent any error regarding this subject, when rendering the Router on the server side, use the imperatively prefetch method in the <code class="jsx-4016328902 ">componentDidMount()</code> lifecycle method.</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;next/router&#x27;</span>

<span class="token keyword">class</span> <span class="token class-name">MyLink</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> router <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    router<span class="token punctuation">.</span><span class="token function">prefetch</span><span class="token punctuation">(</span><span class="token string">&#x27;/dynamic&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> router <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#x27;/dynamic&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          A route transition will happen after 100ms
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>MyLink<span class="token punctuation">)</span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="custom-server-and-routing" class="jsx-3521603919 target docs-anchor-target"></span><a href="#custom-server-and-routing" class="jsx-3521603919">Custom server and routing</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/custom-server">Basic custom server</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/custom-server-express">Express integration</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/custom-server-hapi">Hapi integration</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/custom-server-koa">Koa integration</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/parameterized-routing">Parameterized routing</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/ssr-caching">SSR caching</a></li></ul></details><p>Typically you start your next server with <code class="jsx-4016328902 ">next start</code>. It&#x27;s possible, however, to start a server 100% programmatically in order to customize routes, use route patterns, etc.</p><p>When using a custom server with a server file, for example called <code class="jsx-4016328902 ">server.js</code>, make sure you update the scripts key in <code class="jsx-4016328902 ">package.json</code> to:</p><pre class="language-json"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node server.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NODE_ENV=production node server.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>This example makes <code class="jsx-4016328902 ">/a</code> resolve to <code class="jsx-4016328902 ">./pages/b</code>, and <code class="jsx-4016328902 ">/b</code> resolve to <code class="jsx-4016328902 ">./pages/a</code>:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// This file doesn&#x27;t go through babel or webpack transformation.</span>
<span class="token comment">// Make sure the syntax and sources this file requires are compatible with the current node version you are running</span>
<span class="token comment">// See https://github.com/zeit/next.js/issues/1245 for discussions on Universal Webpack or universal Babel</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createServer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;http&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> parse <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;url&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> next <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;next&#x27;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> dev <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&#x27;production&#x27;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dev <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> handle <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">getRequestHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Be sure to pass `true` as the second argument to `url.parse`.</span>
    <span class="token comment">// This tells it to parse the query portion of the URL.</span>
    <span class="token keyword">const</span> parsedUrl <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> pathname<span class="token punctuation">,</span> query <span class="token punctuation">}</span> <span class="token operator">=</span> parsedUrl

    <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">===</span> <span class="token string">&#x27;/a&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> <span class="token string">&#x27;/b&#x27;</span><span class="token punctuation">,</span> query<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">===</span> <span class="token string">&#x27;/b&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> <span class="token string">&#x27;/a&#x27;</span><span class="token punctuation">,</span> query<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">handle</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> parsedUrl<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;&gt; Ready on http://localhost:3000&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></pre><p>The <code class="jsx-4016328902 ">next</code> API is as follows:</p><ul><li><code class="jsx-4016328902 ">next(opts: object)</code></li></ul><p>Supported options:</p><ul><li><code class="jsx-4016328902 ">dev</code> (<code class="jsx-4016328902 ">bool</code>) whether to launch Next.js in dev mode - default <code class="jsx-4016328902 ">false</code></li><li><code class="jsx-4016328902 ">dir</code> (<code class="jsx-4016328902 ">string</code>) where the Next project is located - default <code class="jsx-4016328902 ">&#x27;.&#x27;</code></li><li><code class="jsx-4016328902 ">quiet</code> (<code class="jsx-4016328902 ">bool</code>) Hide error messages containing server information - default <code class="jsx-4016328902 ">false</code></li><li><code class="jsx-4016328902 ">conf</code> (<code class="jsx-4016328902 ">object</code>) the same object you would use in <code class="jsx-4016328902 ">next.config.js</code> - default <code class="jsx-4016328902 ">{}</code></li></ul><p>Then, change your <code class="jsx-4016328902 ">start</code> script to <code class="jsx-4016328902 ">NODE_ENV=production node server.js</code>.</p><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="disabling-file-system-routing" class="jsx-3521603919 target docs-anchor-target"></span><a href="#disabling-file-system-routing" class="jsx-3521603919">Disabling file-system routing</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>By default, <code class="jsx-4016328902 ">Next</code> will serve each file in <code class="jsx-4016328902 ">/pages</code> under a pathname matching the filename (eg, <code class="jsx-4016328902 ">/pages/some-file.js</code> is served at <code class="jsx-4016328902 ">site.com/some-file</code>.</p><p>If your project uses custom routing, this behavior may result in the same content being served from multiple paths, which can present problems with SEO and UX.</p><p>To disable this behavior &amp; prevent routing based on files in <code class="jsx-4016328902 ">/pages</code>, simply set the following option in your <code class="jsx-4016328902 ">next.config.js</code>:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  useFileSystemPublicRoutes<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>Note that <code class="jsx-4016328902 ">useFileSystemPublicRoutes</code> simply disables filename routes from SSR; client-side routing
may still access those paths. If using this option, you should guard against navigation to routes
you do not want programmatically.</p><p>You may also wish to configure the client-side Router to disallow client-side redirects to filename
routes; please refer to <a href="#intercepting-popstate" class="jsx-2156832104">Intercepting <code class="jsx-4016328902 ">popstate</code></a>.</p><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="dynamic-assetprefix" class="jsx-3521603919 target docs-anchor-target"></span><a href="#dynamic-assetprefix" class="jsx-3521603919">Dynamic assetPrefix</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>Sometimes we need to set the <code class="jsx-4016328902 ">assetPrefix</code> dynamically. This is useful when changing the <code class="jsx-4016328902 ">assetPrefix</code> based on incoming requests.
For that, we can use <code class="jsx-4016328902 ">app.setAssetPrefix</code>.</p><p>Here&#x27;s an example usage of it:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">const</span> next <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;next&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> micro <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;micro&#x27;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> dev <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&#x27;production&#x27;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dev <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> handleNextRequests <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">getRequestHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">micro</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Add assetPrefix support based on the hostname</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>host <span class="token operator">===</span> <span class="token string">&#x27;my-app.com&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">.</span><span class="token function">setAssetPrefix</span><span class="token punctuation">(</span><span class="token string">&#x27;http://cdn.com/myapp&#x27;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">.</span><span class="token function">setAssetPrefix</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">handleNextRequests</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> err
    <span class="token punctuation">}</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`&gt; Ready on http://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="dynamic-import" class="jsx-3521603919 target docs-anchor-target"></span><a href="#dynamic-import" class="jsx-3521603919">Dynamic Import</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-dynamic-import">With Dynamic Import</a></li></ul></details><p>Next.js supports TC39 <a href="https://github.com/tc39/proposal-dynamic-import" target="_blank" rel="noopener noreferrer" class="jsx-329029718">dynamic import proposal</a> for JavaScript.
With that, you could import JavaScript modules (inc. React Components) dynamically and work with them.</p><p>You can think dynamic imports as another way to split your code into manageable chunks.
Since Next.js supports dynamic imports with SSR, you could do amazing things with it.</p><p>Here are a few ways to use dynamic imports.</p><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="1-basic-usage-also-does-ssr" class="jsx-3521603919 target docs-anchor-target"></span><a href="#1-basic-usage-also-does-ssr" class="jsx-3521603919">1. Basic Usage (Also does SSR)</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">&#x27;next/dynamic&#x27;</span>

<span class="token keyword">const</span> DynamicComponent <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;../components/hello&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DynamicComponent</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">HOME PAGE is here!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="2-with-custom-loading-component" class="jsx-3521603919 target docs-anchor-target"></span><a href="#2-with-custom-loading-component" class="jsx-3521603919">2. With Custom Loading Component</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">&#x27;next/dynamic&#x27;</span>

<span class="token keyword">const</span> DynamicComponentWithCustomLoading <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;../components/hello2&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  loading<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DynamicComponentWithCustomLoading</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">HOME PAGE is here!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="3-with-no-ssr" class="jsx-3521603919 target docs-anchor-target"></span><a href="#3-with-no-ssr" class="jsx-3521603919">3. With No SSR</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">&#x27;next/dynamic&#x27;</span>

<span class="token keyword">const</span> DynamicComponentWithNoSSR <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;../components/hello3&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  ssr<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DynamicComponentWithNoSSR</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">HOME PAGE is here!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="4-with-multiple-modules-at-once" class="jsx-3521603919 target docs-anchor-target"></span><a href="#4-with-multiple-modules-at-once" class="jsx-3521603919">4. With Multiple Modules At Once</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">&#x27;next/dynamic&#x27;</span>

<span class="token keyword">const</span> HelloBundle <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  modules<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> components <span class="token operator">=</span> <span class="token punctuation">{</span>
      Hello1<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;../components/hello1&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Hello2<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;../components/hello2&#x27;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> components
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  render<span class="token punctuation">:</span> <span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token punctuation">{</span> Hello1<span class="token punctuation">,</span> Hello2 <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Hello1</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Hello2</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloBundle</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Dynamic Bundle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="custom-app" class="jsx-3521603919 target docs-anchor-target"></span><a href="#custom-app" class="jsx-3521603919">Custom <code class="jsx-4016328902 ">&lt;App&gt;</code></a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-app-layout">Using `_app.js` for layout</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-componentdidcatch">Using `_app.js` to override `componentDidCatch`</a></li></ul></details><p>Next.js uses the <code class="jsx-4016328902 ">App</code> component to initialize pages. You can override it and control the page initialization. Which allows you to do amazing things like:</p><ul><li>Persisting layout between page changes</li><li>Keeping state when navigating pages</li><li>Custom error handling using <code class="jsx-4016328902 ">componentDidCatch</code></li><li>Inject additional data into pages (for example by processing GraphQL queries)</li></ul><p>To override, create the <code class="jsx-4016328902 ">./pages/_app.js</code> file and override the App class as shown below:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span>
<span class="token keyword">import</span> App<span class="token punctuation">,</span> <span class="token punctuation">{</span> Container <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;next/app&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInitialProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> Component<span class="token punctuation">,</span> router<span class="token punctuation">,</span> ctx <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pageProps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>Component<span class="token punctuation">.</span>getInitialProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pageProps <span class="token operator">=</span> <span class="token keyword">await</span> Component<span class="token punctuation">.</span><span class="token function">getInitialProps</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> pageProps <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> pageProps <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Container<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>pageProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="custom-document" class="jsx-3521603919 target docs-anchor-target"></span><a href="#custom-document" class="jsx-3521603919">Custom <code class="jsx-4016328902 ">&lt;Document&gt;</code></a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-styled-components">Styled components custom document</a></li><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-amp">Google AMP</a></li></ul></details><ul><li>Is rendered on the server side</li><li>Is used to change the initial server side rendered document markup</li><li>Commonly used to implement server side rendering for css-in-js libraries like <a href="https://github.com/zeit/next.js/blob/master/examples/with-styled-components" target="_blank" rel="noopener noreferrer" class="jsx-329029718">styled-components</a>, <a href="https://github.com/zeit/next.js/blob/master/examples/with-glamorous" target="_blank" rel="noopener noreferrer" class="jsx-329029718">glamorous</a> or <a href="https://github.com/zeit/next.js/blob/master/with-emotion" target="_blank" rel="noopener noreferrer" class="jsx-329029718">emotion</a>. <a href="https://github.com/zeit/styled-jsx" target="_blank" rel="noopener noreferrer" class="jsx-329029718">styled-jsx</a> is included with Next.js by default.</li></ul><p>Pages in <code class="jsx-4016328902 ">Next.js</code> skip the definition of the surrounding document&#x27;s markup. For example, you never include <code class="jsx-4016328902 ">&lt;html&gt;</code>, <code class="jsx-4016328902 ">&lt;body&gt;</code>, etc. To override that default behavior, you must create a file at <code class="jsx-4016328902 ">./pages/_document.js</code>, where you can extend the <code class="jsx-4016328902 ">Document</code> class:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// _document is only rendered on the server side and not on the client side</span>
<span class="token comment">// Event handlers like onClick can&#x27;t be added to this file</span>

<span class="token comment">// ./pages/_document.js</span>
<span class="token keyword">import</span> Document<span class="token punctuation">,</span> <span class="token punctuation">{</span> Head<span class="token punctuation">,</span> Main<span class="token punctuation">,</span> NextScript <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;next/document&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyDocument</span> <span class="token keyword">extends</span> <span class="token class-name">Document</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInitialProps</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> initialProps <span class="token operator">=</span> <span class="token keyword">await</span> Document<span class="token punctuation">.</span><span class="token function">getInitialProps</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>initialProps <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{`body { margin: 0 } /* custom! */`}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>custom_class<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Main</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NextScript</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>The <code class="jsx-4016328902 ">ctx</code> object is equivalent to the one received in all <a href="#fetching-data-and-component-lifecycle" class="jsx-2156832104"><code class="jsx-4016328902 ">getInitialProps</code></a> hooks, with one addition:</p><ul><li><code class="jsx-4016328902 ">renderPage</code> (<code class="jsx-4016328902 ">Function</code>) a callback that executes the actual React rendering logic (synchronously). It&#x27;s useful to decorate this function in order to support server-rendering wrappers like Aphrodite&#x27;s <a href="https://github.com/Khan/aphrodite#server-side-rendering" target="_blank" rel="noopener noreferrer" class="jsx-329029718"><code class="jsx-4016328902 ">renderStatic</code></a></li></ul><p><strong>Note: React-components outside of <code class="jsx-4016328902 ">&lt;Main /&gt;</code> will not be initialised by the browser. Do <em>not</em> add application logic here. If you need shared components in all your pages (like a menu or a toolbar), take a look at the <code class="jsx-4016328902 ">App</code> component instead.</strong></p><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="custom-error-handling" class="jsx-3521603919 target docs-anchor-target"></span><a href="#custom-error-handling" class="jsx-3521603919">Custom error handling</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>404 or 500 errors are handled both client and server side by a default component <code class="jsx-4016328902 ">error.js</code>. If you wish to override it, define a <code class="jsx-4016328902 ">_error.js</code> in the pages folder:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Error</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function">getInitialProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> res<span class="token punctuation">,</span> err <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> statusCode <span class="token operator">=</span> res <span class="token operator">?</span> res<span class="token punctuation">.</span>statusCode <span class="token punctuation">:</span> err <span class="token operator">?</span> err<span class="token punctuation">.</span>statusCode <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> statusCode <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>statusCode
          <span class="token operator">?</span> <span class="token template-string"><span class="token string">`An error </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>statusCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> occurred on server`</span></span>
          <span class="token punctuation">:</span> <span class="token string">&#x27;An error occurred on client&#x27;</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="reusing-the-built-in-error-page" class="jsx-3521603919 target docs-anchor-target"></span><a href="#reusing-the-built-in-error-page" class="jsx-3521603919">Reusing the built-in error page</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>If you want to render the built-in error page you can by using <code class="jsx-4016328902 ">next/error</code>:</p><pre class="language-jsx"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span>
<span class="token keyword">import</span> Error <span class="token keyword">from</span> <span class="token string">&#x27;next/error&#x27;</span>
<span class="token keyword">import</span> fetch <span class="token keyword">from</span> <span class="token string">&#x27;isomorphic-unfetch&#x27;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Page</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInitialProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;https://api.github.com/repos/zeit/next.js&#x27;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> statusCode <span class="token operator">=</span> res<span class="token punctuation">.</span>statusCode <span class="token operator">&gt;</span> <span class="token number">200</span> <span class="token operator">?</span> res<span class="token punctuation">.</span>statusCode <span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> statusCode<span class="token punctuation">,</span> stars<span class="token punctuation">:</span> json<span class="token punctuation">.</span>stargazers_count <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Error</span> <span class="token attr-name">statusCode</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>statusCode<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        Next stars: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>stars<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><blockquote class="jsx-2577077934 "><p>If you have created a custom error page you have to import your own <code class="jsx-4016328902 ">_error</code> component instead of <code class="jsx-4016328902 ">next/error</code></p></blockquote><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="custom-configuration" class="jsx-3521603919 target docs-anchor-target"></span><a href="#custom-configuration" class="jsx-3521603919">Custom configuration</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>For custom advanced behavior of Next.js, you can create a <code class="jsx-4016328902 ">next.config.js</code> in the root of your project directory (next to <code class="jsx-4016328902 ">pages/</code> and <code class="jsx-4016328902 ">package.json</code>).</p><p>Note: <code class="jsx-4016328902 ">next.config.js</code> is a regular Node.js module, not a JSON file. It gets used by the Next server and build phases, and not included in the browser build.</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/* config options here */</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>Or use a function:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span>phase<span class="token punctuation">,</span> <span class="token punctuation">{</span>defaultConfig<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//</span>
  <span class="token comment">// https://github.com/zeit/</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">/* config options here */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><p><code class="jsx-4016328902 ">phase</code> is the current context in which the configuration is loaded. You can see all phases here: <a href="https://github.com/zeit/next.js/blob/master/lib/constants.js" target="_blank" rel="noopener noreferrer" class="jsx-329029718">constants</a>
Phases can be imported from <code class="jsx-4016328902 ">next/constants</code>:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token constant">PHASE_DEVELOPMENT_SERVER</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;next/constants&#x27;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span>phase<span class="token punctuation">,</span> <span class="token punctuation">{</span>defaultConfig<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>phase <span class="token operator">===</span> <span class="token constant">PHASE_DEVELOPMENT_SERVER</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">/* development only config options here */</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">/* config options for all phases except development here */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="setting-a-custom-build-directory" class="jsx-3521603919 target docs-anchor-target"></span><a href="#setting-a-custom-build-directory" class="jsx-3521603919">Setting a custom build directory</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>You can specify a name to use for a custom build directory. For example, the following config will create a <code class="jsx-4016328902 ">build</code> folder instead of a <code class="jsx-4016328902 ">.next</code> folder. If no configuration is specified then next will create a <code class="jsx-4016328902 ">.next</code> folder.</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  distDir<span class="token punctuation">:</span> <span class="token string">&#x27;build&#x27;</span>
<span class="token punctuation">}</span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="disabling-etag-generation" class="jsx-3521603919 target docs-anchor-target"></span><a href="#disabling-etag-generation" class="jsx-3521603919">Disabling etag generation</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>You can disable etag generation for HTML pages depending on your cache strategy. If no configuration is specified then Next will generate etags for every page.</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  generateEtags<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="configuring-the-ondemandentries" class="jsx-3521603919 target docs-anchor-target"></span><a href="#configuring-the-ondemandentries" class="jsx-3521603919">Configuring the onDemandEntries</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>Next exposes some options that give you some control over how the server will dispose or keep in memories pages built:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  onDemandEntries<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// period (in ms) where the server will keep pages in the buffer</span>
    maxInactiveAge<span class="token punctuation">:</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token comment">// number of pages that should be kept simultaneously without being disposed</span>
    pagesBufferLength<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>This is development-only feature. If you want to cache SSR pages in production, please see <a href="https://github.com/zeit/next.js/tree/canary/examples/ssr-caching" target="_blank" rel="noopener noreferrer" class="jsx-329029718">SSR-caching</a> example.</p><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="configuring-extensions-looked-for-when-resolving-pages-in-pages" class="jsx-3521603919 target docs-anchor-target"></span><a href="#configuring-extensions-looked-for-when-resolving-pages-in-pages" class="jsx-3521603919">Configuring extensions looked for when resolving pages in <code class="jsx-4016328902 ">pages</code></a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>Aimed at modules like <a href="https://github.com/zeit/next-plugins/tree/master/packages/next-typescript" target="_blank" rel="noopener noreferrer" class="jsx-329029718"><code class="jsx-4016328902 ">@zeit/next-typescript</code></a>, that add support for pages ending in <code class="jsx-4016328902 ">.ts</code>. <code class="jsx-4016328902 ">pageExtensions</code> allows you to configure the extensions looked for in the <code class="jsx-4016328902 ">pages</code> directory when resolving pages.</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  pageExtensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;jsx&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;js&#x27;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></pre><div><h4 class="jsx-3235008975 lean " data-components-heading="true"><span id="configuring-the-build-id" class="jsx-3521603919 target docs-anchor-target"></span><a href="#configuring-the-build-id" class="jsx-3521603919">Configuring the build ID</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h4></div><p>Next.js uses a constant generated at build time to identify which version of your application is being served. This can cause problems in multi-server deployments when <code class="jsx-4016328902 ">next build</code> is ran on every server. In order to keep a static build id between builds you can provide the <code class="jsx-4016328902 ">generateBuildId</code> function:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  generateBuildId<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// For example get the latest git commit hash here</span>
    <span class="token keyword">return</span> <span class="token string">&#x27;my-build-id&#x27;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="customizing-webpack-config" class="jsx-3521603919 target docs-anchor-target"></span><a href="#customizing-webpack-config" class="jsx-3521603919">Customizing webpack config</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-webpack-bundle-analyzer">Custom webpack bundle analyzer</a></li></ul></details><p>Some commonly asked for features are available as modules:</p><ul><li><a href="https://github.com/zeit/next-plugins/tree/master/packages/next-css" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@zeit/next-css</a></li><li><a href="https://github.com/zeit/next-plugins/tree/master/packages/next-sass" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@zeit/next-sass</a></li><li><a href="https://github.com/zeit/next-plugins/tree/master/packages/next-less" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@zeit/next-less</a></li><li><a href="https://github.com/zeit/next-plugins/tree/master/packages/next-preact" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@zeit/next-preact</a></li><li><a href="https://github.com/zeit/next-plugins/tree/master/packages/next-typescript" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@zeit/next-typescript</a></li></ul><p><em>Warning: The <code class="jsx-4016328902 ">webpack</code> function is executed twice, once for the server and once for the client. This allows you to distinguish between client and server configuration using the <code class="jsx-4016328902 ">isServer</code> property</em></p><p>Multiple configurations can be combined together with function composition. For example:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">const</span> withTypescript <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;@zeit/next-typescript&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> withSass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;@zeit/next-sass&#x27;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">withTypescript</span><span class="token punctuation">(</span><span class="token function">withSass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Further custom configuration here</span>
    <span class="token keyword">return</span> config
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></pre><p>In order to extend our usage of <code class="jsx-4016328902 ">webpack</code>, you can define a function that extends its config via <code class="jsx-4016328902 ">next.config.js</code>.</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js is not transformed by Babel. So you can only use javascript features supported by your version of Node.js.</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  webpack<span class="token punctuation">:</span> <span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token punctuation">{</span> buildId<span class="token punctuation">,</span> dev<span class="token punctuation">,</span> isServer<span class="token punctuation">,</span> defaultLoaders <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Perform customizations to webpack config</span>
    <span class="token comment">// Important: return the modified config</span>
    <span class="token keyword">return</span> config
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  webpackDevMiddleware<span class="token punctuation">:</span> config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Perform customizations to webpack dev middleware config</span>
    <span class="token comment">// Important: return the modified config</span>
    <span class="token keyword">return</span> config
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>The second argument to <code class="jsx-4016328902 ">webpack</code> is an object containing properties useful when customing the WebPack configuration:</p><ul><li><code class="jsx-4016328902 ">buildId</code> - <code class="jsx-4016328902 ">String</code> the build id used as a unique identifier between builds</li><li><code class="jsx-4016328902 ">dev</code> - <code class="jsx-4016328902 ">Boolean</code> shows if the compilation is done in development mode</li><li><code class="jsx-4016328902 ">isServer</code> - <code class="jsx-4016328902 ">Boolean</code> shows if the resulting configuration will be used for server side (<code class="jsx-4016328902 ">true</code>), or client size compilation (<code class="jsx-4016328902 ">false</code>).</li><li><p><code class="jsx-4016328902 ">defaultLoaders</code> - <code class="jsx-4016328902 ">Object</code> Holds loader objects Next.js uses internally, so that you can use them in custom configuration</p><ul><li><code class="jsx-4016328902 ">babel</code> - <code class="jsx-4016328902 ">Object</code> the <code class="jsx-4016328902 ">babel-loader</code> configuration for Next.js.</li><li><code class="jsx-4016328902 ">hotSelfAccept</code> - <code class="jsx-4016328902 ">Object</code> the <code class="jsx-4016328902 ">hot-self-accept-loader</code> configuration. This loader should only be used for advanced use cases. For example <a href="https://github.com/zeit/next-plugins/tree/master/packages/next-typescript" target="_blank" rel="noopener noreferrer" class="jsx-329029718"><code class="jsx-4016328902 ">@zeit/next-typescript</code></a> adds it for top-level typescript pages.</li></ul></li></ul><p>Example usage of <code class="jsx-4016328902 ">defaultLoaders.babel</code>:</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// Example next.config.js for adding a loader that depends on babel-loader</span>
<span class="token comment">// This source was taken from the @zeit/next-mdx plugin source:</span>
<span class="token comment">// https://github.com/zeit/next-plugins/blob/master/packages/next-mdx</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  webpack<span class="token punctuation">:</span> <span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/.mdx/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        options<span class="token punctuation">.</span>defaultLoaders<span class="token punctuation">.</span>babel<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&#x27;@mdx-js/loader&#x27;</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> pluginOptions<span class="token punctuation">.</span>options
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> config
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="customizing-babel-config" class="jsx-3521603919 target docs-anchor-target"></span><a href="#customizing-babel-config" class="jsx-3521603919">Customizing babel config</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-custom-babel-config">Custom babel configuration</a></li></ul></details><p>In order to extend our usage of <code class="jsx-4016328902 ">babel</code>, you can simply define a <code class="jsx-4016328902 ">.babelrc</code> file at the root of your app. This file is optional.</p><p>If found, we&#x27;re going to consider it the <em>source of truth</em>, therefore it needs to define what next needs as well, which is the <code class="jsx-4016328902 ">next/babel</code> preset.</p><p>This is designed so that you are not surprised by modifications we could make to the babel configurations.</p><p>Here&#x27;s an example <code class="jsx-4016328902 ">.babelrc</code> file:</p><pre class="language-json"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;next/babel&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>The <code class="jsx-4016328902 ">next/babel</code> preset includes everything needed to transpile React applications. This includes:</p><ul><li>preset-env</li><li>preset-react</li><li>plugin-proposal-class-properties</li><li>plugin-proposal-object-rest-spread</li><li>plugin-transform-runtime</li><li>styled-jsx</li></ul><p>These presets / plugins <strong>should not</strong> be added to your custom <code class="jsx-4016328902 ">.babelrc</code>. Instead, you can configure them on the <code class="jsx-4016328902 ">next/babel</code> preset:</p><pre class="language-json"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;next/babel&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;preset-env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;transform-runtime&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;styled-jsx&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;class-properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>The <code class="jsx-4016328902 ">modules</code> option on <code class="jsx-4016328902 ">&quot;preset-env&quot;</code> should be kept to <code class="jsx-4016328902 ">false</code> otherwise webpack code splitting is disabled.</p><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="exposing-configuration-to-the-server--client-side" class="jsx-3521603919 target docs-anchor-target"></span><a href="#exposing-configuration-to-the-server--client-side" class="jsx-3521603919">Exposing configuration to the server / client side</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>The <code class="jsx-4016328902 ">next/config</code> module gives your app access to runtime configuration stored in your <code class="jsx-4016328902 ">next.config.js</code>. Place any server-only runtime config under a <code class="jsx-4016328902 ">serverRuntimeConfig</code> property and anything accessible to both client and server-side code under <code class="jsx-4016328902 ">publicRuntimeConfig</code>.</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  serverRuntimeConfig<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// Will only be available on the server side</span>
    mySecret<span class="token punctuation">:</span> <span class="token string">&#x27;secret&#x27;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  publicRuntimeConfig<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// Will be available on both server and client</span>
    staticFolder<span class="token punctuation">:</span> <span class="token string">&#x27;/static&#x27;</span><span class="token punctuation">,</span>
    mySecret<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">MY_SECRET</span> <span class="token comment">// Pass through env variables</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// pages/index.js</span>
<span class="token keyword">import</span> getConfig <span class="token keyword">from</span> <span class="token string">&#x27;next/config&#x27;</span>
<span class="token comment">// Only holds serverRuntimeConfig and publicRuntimeConfig from next.config.js nothing else.</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>serverRuntimeConfig<span class="token punctuation">,</span> publicRuntimeConfig<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serverRuntimeConfig<span class="token punctuation">.</span>mySecret<span class="token punctuation">)</span> <span class="token comment">// Will only be available on the server side</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>publicRuntimeConfig<span class="token punctuation">.</span>staticFolder<span class="token punctuation">)</span> <span class="token comment">// Will be available on both server and client</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>publicRuntimeConfig<span class="token punctuation">.</span>staticFolder<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/logo.png`</span></span><span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">&quot;logo&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="starting-the-server-on-alternative-hostname" class="jsx-3521603919 target docs-anchor-target"></span><a href="#starting-the-server-on-alternative-hostname" class="jsx-3521603919">Starting the server on alternative hostname</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>To start the development server using a different default hostname you can use <code class="jsx-4016328902 ">--hostname hostname_here</code> or <code class="jsx-4016328902 ">-H hostname_here</code> option with next dev. This will start a TCP server listening for connections on the provided host.</p><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="cdn-support-with-asset-prefix" class="jsx-3521603919 target docs-anchor-target"></span><a href="#cdn-support-with-asset-prefix" class="jsx-3521603919">CDN support with Asset Prefix</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>To set up a CDN, you can set up the <code class="jsx-4016328902 ">assetPrefix</code> setting and configure your CDN&#x27;s origin to resolve to the domain that Next.js is hosted on.</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token keyword">const</span> isProd <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#x27;production&#x27;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// You may only need to add assetPrefix in the production.</span>
  assetPrefix<span class="token punctuation">:</span> isProd <span class="token operator">?</span> <span class="token string">&#x27;https://cdn.mydomain.com&#x27;</span> <span class="token punctuation">:</span> <span class="token string">&#x27;&#x27;</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>Note: Next.js will automatically use that prefix in the scripts it loads, but this has no effect whatsoever on <code class="jsx-4016328902 ">/static</code>. If you want to serve those assets over the CDN, you&#x27;ll have to introduce the prefix yourself. One way of introducing a prefix that works inside your components and varies by environment is documented <a href="https://github.com/zeit/next.js/blob/master/examples/with-universal-configuration" target="_blank" rel="noopener noreferrer" class="jsx-329029718">in this example</a>.</p><div class="jsx-2821545348"><h2 class="jsx-3989962531 lean " data-components-heading="true"><span id="production-deployment" class="jsx-3521603919 target docs-anchor-target"></span><a href="#production-deployment" class="jsx-3521603919">Production deployment</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h2></div><p>To deploy, instead of running <code class="jsx-4016328902 ">next</code>, you want to build for production usage ahead of time. Therefore, building and starting are separate commands:</p><pre class="language-bash"><pre class="jsx-1031880288 "><code class="jsx-1031880288">next build
next start
</code></pre></pre><p>For example, to deploy with <a href="https://zeit.co/now" target="_blank" rel="noopener noreferrer" class="jsx-329029718"><code class="jsx-4016328902 ">now</code></a> a <code class="jsx-4016328902 ">package.json</code> like follows is recommended:</p><pre class="language-json"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-app&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;next&quot;</span><span class="token operator">:</span> <span class="token string">&quot;latest&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next start&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>Then run <code class="jsx-4016328902 ">now</code> and enjoy!</p><p>Next.js can be deployed to other hosting solutions too. Please have a look at the <a href="https://github.com/zeit/next.js/wiki/Deployment" target="_blank" rel="noopener noreferrer" class="jsx-329029718">&#x27;Deployment&#x27;</a> section of the wiki.</p><p>Note: <code class="jsx-4016328902 ">NODE_ENV</code> is properly configured by the <code class="jsx-4016328902 ">next</code> subcommands, if absent, to maximize performance. if you’re using Next.js <a href="#custom-server-and-routing" class="jsx-2156832104">programmatically</a>, it’s your responsibility to set <code class="jsx-4016328902 ">NODE_ENV=production</code> manually!</p><p>Note: we recommend putting <code class="jsx-4016328902 ">.next</code>, or your <a href="https://github.com/zeit/next.js#custom-configuration" target="_blank" rel="noopener noreferrer" class="jsx-329029718">custom dist folder</a>, in <code class="jsx-4016328902 ">.gitignore</code> or <code class="jsx-4016328902 ">.npmignore</code>. Otherwise, use <code class="jsx-4016328902 ">files</code> or <code class="jsx-4016328902 ">now.files</code> to opt-into a whitelist of files you want to deploy, excluding <code class="jsx-4016328902 ">.next</code> or your custom dist folder.</p><div class="jsx-2821545348"><h2 class="jsx-3989962531 lean " data-components-heading="true"><span id="browser-support" class="jsx-3521603919 target docs-anchor-target"></span><a href="#browser-support" class="jsx-3521603919">Browser support</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h2></div><p>Next.js supports IE11 and all modern browsers out of the box using <a href="https://new.babeljs.io/docs/en/next/babel-preset-env.html" target="_blank" rel="noopener noreferrer" class="jsx-329029718"><code class="jsx-4016328902 ">@babel/preset-env</code></a>. In order to support IE11 Next.js adds a global <code class="jsx-4016328902 ">Promise</code> polyfill. In cases where your own code or any external NPM dependencies you are using requires features not supported by your target browsers you will need to implement polyfills.</p><p>The <a href="https://github.com/zeit/next.js/tree/canary/examples/with-polyfills" target="_blank" rel="noopener noreferrer" class="jsx-329029718">polyfills</a> example demonstrates the recommended approach to implement polyfills.</p><div class="jsx-2821545348"><h2 class="jsx-3989962531 lean " data-components-heading="true"><span id="static-html-export" class="jsx-3521603919 target docs-anchor-target"></span><a href="#static-html-export" class="jsx-3521603919">Static HTML export</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h2></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-static-export">Static export</a></li></ul></details><p><code class="jsx-4016328902 ">next export</code> is a way to run your Next.js app as a standalone static app without the need for a Node.js server.
The exported app supports almost every feature of Next.js, including dynamic urls, prefetching, preloading and dynamic imports.</p><p>The way <code class="jsx-4016328902 ">next export</code> works is by pre-rendering all pages possible to HTML. It does so based on a mapping of <code class="jsx-4016328902 ">pathname</code> key to page object. This mapping is called the <code class="jsx-4016328902 ">exportPathMap</code>.</p><p>The page object has 2 values:</p><ul><li><code class="jsx-4016328902 ">page</code> - <code class="jsx-4016328902 ">String</code> the page inside the <code class="jsx-4016328902 ">pages</code> directory to render</li><li><code class="jsx-4016328902 ">query</code> - <code class="jsx-4016328902 ">Object</code> the <code class="jsx-4016328902 ">query</code> object passed to <code class="jsx-4016328902 ">getInitialProps</code> when pre-rendering. Defaults to <code class="jsx-4016328902 ">{}</code></li></ul><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="usage" class="jsx-3521603919 target docs-anchor-target"></span><a href="#usage" class="jsx-3521603919">Usage</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>Simply develop your app as you normally do with Next.js. Then run:</p><pre><pre class="jsx-1031880288 "><code class="jsx-1031880288">next build
next export
</code></pre></pre><p>By default <code class="jsx-4016328902 ">next export</code> doesn&#x27;t require any configuration. It will generate a default <code class="jsx-4016328902 ">exportPathMap</code> containing the routes to pages inside the <code class="jsx-4016328902 ">pages</code> directory. This default mapping is available as <code class="jsx-4016328902 ">defaultPathMap</code> in the example below.</p><p>If your application has dynamic routes you can add a dynamic <code class="jsx-4016328902 ">exportPathMap</code> in <code class="jsx-4016328902 ">next.config.js</code>.
This function is asynchronous and gets the default <code class="jsx-4016328902 ">exportPathMap</code> as a parameter.</p><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  exportPathMap<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>defaultPathMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;/&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">:</span> <span class="token string">&#x27;/&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;/about&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">:</span> <span class="token string">&#x27;/about&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;/readme.md&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">:</span> <span class="token string">&#x27;/readme&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;/p/hello-nextjs&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">:</span> <span class="token string">&#x27;/post&#x27;</span><span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">&#x27;hello-nextjs&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;/p/learn-nextjs&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">:</span> <span class="token string">&#x27;/post&#x27;</span><span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">&#x27;learn-nextjs&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;/p/deploy-nextjs&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">:</span> <span class="token string">&#x27;/post&#x27;</span><span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">&#x27;deploy-nextjs&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><blockquote class="jsx-2577077934 "><p>Note that if the path ends with a directory, it will be exported as <code class="jsx-4016328902 ">/dir-name/index.html</code>, but if it ends with an extension, it will be exported as the specified filename, e.g. <code class="jsx-4016328902 ">/readme.md</code> above. If you use a file extension other than <code class="jsx-4016328902 ">.html</code>, you may need to set the <code class="jsx-4016328902 ">Content-Type</code> header to <code class="jsx-4016328902 ">text/html</code> when serving this content.</p></blockquote><p>Then simply run these commands:</p><pre class="language-bash"><pre class="jsx-1031880288 "><code class="jsx-1031880288">next build
next <span class="token function">export</span>
</code></pre></pre><p>For that you may need to add a NPM script to <code class="jsx-4016328902 ">package.json</code> like this:</p><pre class="language-json"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;export&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run build &amp;&amp; next export&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>And run it at once with:</p><pre class="language-bash"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token function">npm</span> run <span class="token function">export</span>
</code></pre></pre><p>Then you have a static version of your app in the <code class="jsx-4016328902 ">out</code> directory.</p><blockquote class="jsx-2577077934 "><p>You can also customize the output directory. For that run <code class="jsx-4016328902 ">next export -h</code> for the help.</p></blockquote><p>Now you can deploy the <code class="jsx-4016328902 ">out</code> directory to any static hosting service. Note that there is an additional step for deploying to GitHub Pages, <a href="https://github.com/zeit/next.js/wiki/Deploying-a-Next.js-app-into-GitHub-Pages" target="_blank" rel="noopener noreferrer" class="jsx-329029718">documented here</a>.</p><p>For an example, simply visit the <code class="jsx-4016328902 ">out</code> directory and run following command to deploy your app to <a href="https://zeit.co/now" target="_blank" rel="noopener noreferrer" class="jsx-329029718">ZEIT Now</a>.</p><pre class="language-bash"><pre class="jsx-1031880288 "><code class="jsx-1031880288">now
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="copying-custom-files" class="jsx-3521603919 target docs-anchor-target"></span><a href="#copying-custom-files" class="jsx-3521603919">Copying custom files</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>In case you have to copy custom files like a robots.txt or generate a sitemap.xml you can do this inside of <code class="jsx-4016328902 ">exportPathMap</code>.
<code class="jsx-4016328902 ">exportPathMap</code> gets a few contextual parameter to aid you with creating/copying files:</p><ul><li><code class="jsx-4016328902 ">dev</code> - <code class="jsx-4016328902 ">true</code> when <code class="jsx-4016328902 ">exportPathMap</code> is being called in development. <code class="jsx-4016328902 ">false</code> when running <code class="jsx-4016328902 ">next export</code>. In development <code class="jsx-4016328902 ">exportPathMap</code> is used to define routes and behavior like copying files is not required.</li><li><code class="jsx-4016328902 ">dir</code> - Absolute path to the project directory</li><li><code class="jsx-4016328902 ">outDir</code> - Absolute path to the <code class="jsx-4016328902 ">out</code> directory (configurable with <code class="jsx-4016328902 ">-o</code> or <code class="jsx-4016328902 ">--outdir</code>). When <code class="jsx-4016328902 ">dev</code> is <code class="jsx-4016328902 ">true</code> the value of <code class="jsx-4016328902 ">outDir</code> will be <code class="jsx-4016328902 ">null</code>.</li><li><code class="jsx-4016328902 ">distDir</code> - Absolute path to the <code class="jsx-4016328902 ">.next</code> directory (configurable using the <code class="jsx-4016328902 ">distDir</code> config key)</li><li><code class="jsx-4016328902 ">buildId</code> - The buildId the export is running for</li></ul><pre class="language-js"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token comment">// next.config.js</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> join <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> promisify <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;util&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> copyFile <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>copyFile<span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  exportPathMap<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>defaultPathMap<span class="token punctuation">,</span> <span class="token punctuation">{</span>dev<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> outDir<span class="token punctuation">,</span> distDir<span class="token punctuation">,</span> buildId<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> defaultPathMap
    <span class="token punctuation">}</span>
    <span class="token comment">// This will copy robots.txt from your project root into the out directory</span>
    <span class="token keyword">await</span> <span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">&#x27;robots.txt&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">join</span><span class="token punctuation">(</span>outDir<span class="token punctuation">,</span> <span class="token string">&#x27;robots.txt&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> defaultPathMap
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></pre><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="limitation" class="jsx-3521603919 target docs-anchor-target"></span><a href="#limitation" class="jsx-3521603919">Limitation</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>With <code class="jsx-4016328902 ">next export</code>, we build a HTML version of your app. At export time we will run <code class="jsx-4016328902 ">getInitialProps</code> of your pages.</p><p>The <code class="jsx-4016328902 ">req</code> and <code class="jsx-4016328902 ">res</code> fields of the <code class="jsx-4016328902 ">context</code> object passed to <code class="jsx-4016328902 ">getInitialProps</code> are not available as there is no server running.</p><blockquote class="jsx-2577077934 "><p>You won&#x27;t be able to render HTML dynamically when static exporting, as we pre-build the HTML files. If you want to do dynamic rendering use <code class="jsx-4016328902 ">next start</code> or the custom server API</p></blockquote><div class="jsx-2821545348"><h2 class="jsx-3989962531 lean " data-components-heading="true"><span id="multi-zones" class="jsx-3521603919 target docs-anchor-target"></span><a href="#multi-zones" class="jsx-3521603919">Multi Zones</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h2></div><details class="jsx-2868182892"><summary class="jsx-4030115387"><b>Examples</b></summary><ul><li><a target="_blank" href="https://github.com/zeit/next.js/blob/master/examples/with-zones">With Zones</a></li></ul></details><p>A zone is a single deployment of a Next.js app. Just like that, you can have multiple zones. Then you can merge them as a single app.</p><p>For an example, you can have two zones like this:</p><ul><li><a href="https://docs.my-app.com" target="_blank" rel="noopener noreferrer" class="jsx-329029718">https://docs.my-app.com</a> for serving <code class="jsx-4016328902 ">/docs/**</code></li><li><a href="https://ui.my-app.com" target="_blank" rel="noopener noreferrer" class="jsx-329029718">https://ui.my-app.com</a> for serving all other pages</li></ul><p>With multi zones support, you can merge both these apps into a single one. Which allows your customers to browse it using a single URL. But you can develop and deploy both apps independently.</p><blockquote class="jsx-2577077934 "><p>This is exactly the same concept as microservices, but for frontend apps.</p></blockquote><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="how-to-define-a-zone" class="jsx-3521603919 target docs-anchor-target"></span><a href="#how-to-define-a-zone" class="jsx-3521603919">How to define a zone</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>There are no special zones related APIs. You only need to do following things:</p><ul><li>Make sure to keep only the pages you need in your app. (For an example, <a href="https://ui.my-app.com" target="_blank" rel="noopener noreferrer" class="jsx-329029718">https://ui.my-app.com</a> should not contain pages for <code class="jsx-4016328902 ">/docs/**</code>)</li><li>Make sure your app has an <a href="https://github.com/zeit/next.js#cdn-support-with-asset-prefix" target="_blank" rel="noopener noreferrer" class="jsx-329029718">assetPrefix</a>. (You can also define the assetPrefix <a href="https://github.com/zeit/next.js#dynamic-assetprefix" target="_blank" rel="noopener noreferrer" class="jsx-329029718">dynamically</a>.)</li></ul><div class="jsx-3894000547"><h3 class="jsx-2214628669 lean " data-components-heading="true"><span id="how-to-merge-them" class="jsx-3521603919 target docs-anchor-target"></span><a href="#how-to-merge-them" class="jsx-3521603919">How to merge them</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h3></div><p>You can merge zones using any HTTP proxy.</p><p>You can use <a href="https://github.com/zeit/micro-proxy" target="_blank" rel="noopener noreferrer" class="jsx-329029718">micro proxy</a> as your local proxy server. It allows you to easily define routing rules like below:</p><pre class="language-json"><pre class="jsx-1031880288 "><code class="jsx-1031880288"><span class="token punctuation">{</span>
  <span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token property">&quot;pathname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/docs**&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;method&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;OPTIONS&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token property">&quot;dest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://docs.my-app.com&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;pathname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/**&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;dest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://ui.my-app.com&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></pre><p>For the production deployment, you can use the <a href="https://zeit.co/docs/features/path-aliases" target="_blank" rel="noopener noreferrer" class="jsx-329029718">path alias</a> feature if you are using <a href="https://zeit.co/now" target="_blank" rel="noopener noreferrer" class="jsx-329029718">ZEIT now</a>. Otherwise, you can configure your existing proxy server to route HTML pages using a set of rules as show above.</p><div class="jsx-2821545348"><h2 class="jsx-3989962531 lean " data-components-heading="true"><span id="recipes" class="jsx-3521603919 target docs-anchor-target"></span><a href="#recipes" class="jsx-3521603919">Recipes</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h2></div><ul><li><a href="https://www.raygesualdo.com/posts/301-redirects-with-nextjs/" target="_blank" rel="noopener noreferrer" class="jsx-329029718">Setting up 301 redirects</a></li><li><a href="https://arunoda.me/blog/ssr-and-server-only-modules" target="_blank" rel="noopener noreferrer" class="jsx-329029718">Dealing with SSR and server only modules</a></li><li><a href="https://github.com/builderbook/builderbook" target="_blank" rel="noopener noreferrer" class="jsx-329029718">Building with React-Material-UI-Next-Express-Mongoose-Mongodb</a></li><li><a href="https://github.com/async-labs/saas" target="_blank" rel="noopener noreferrer" class="jsx-329029718">Build a SaaS Product with React-Material-UI-Next-MobX-Express-Mongoose-MongoDB-TypeScript</a></li></ul><div class="jsx-2821545348"><h2 class="jsx-3989962531 lean " data-components-heading="true"><span id="faq" class="jsx-3521603919 target docs-anchor-target"></span><a href="#faq" class="jsx-3521603919">FAQ</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h2></div><details class="jsx-2868182892"><summary class="jsx-4030115387">Is this production ready?</summary><p>Next.js has been powering <a href="https://zeit.co" target="_blank" rel="noopener noreferrer" class="jsx-329029718">https://zeit.co</a> since its inception.</p><p>We’re ecstatic about both the developer experience and end-user performance, so we decided to share it with the community.</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">How big is it?</summary><p>The client side bundle size should be measured in a per-app basis.
A small Next main bundle is around 65kb gzipped.</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">Is this like `create-react-app`?</summary><p>Yes and No.</p><p>Yes in that both make your life easier.</p><p>No in that it enforces a <em>structure</em> so that we can do more advanced things like:</p><ul><li>Server side rendering</li><li>Automatic code splitting</li></ul><p>In addition, Next.js provides two built-in features that are critical for every single website:</p><ul><li>Routing with lazy component loading: <code class="jsx-4016328902 ">&lt;Link&gt;</code> (by importing <code class="jsx-4016328902 ">next/link</code>)</li><li>A way for components to alter <code class="jsx-4016328902 ">&lt;head&gt;</code>: <code class="jsx-4016328902 ">&lt;Head&gt;</code> (by importing <code class="jsx-4016328902 ">next/head</code>)</li></ul><p>If you want to create re-usable React components that you can embed in your Next.js app or other React applications, using <code class="jsx-4016328902 ">create-react-app</code> is a great idea. You can later <code class="jsx-4016328902 ">import</code> it and keep your codebase clean!</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">How do I use CSS-in-JS solutions?</summary><p>Next.js bundles <a href="https://github.com/zeit/styled-jsx" target="_blank" rel="noopener noreferrer" class="jsx-329029718">styled-jsx</a> supporting scoped css. However you can use any CSS-in-JS solution in your Next app by just including your favorite library <a href="#css-in-js" class="jsx-2156832104">as mentioned before</a> in the document.</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">What syntactic features are transpiled? How do I change them?</summary><p>We track V8. Since V8 has wide support for ES6 and <code class="jsx-4016328902 ">async</code> and <code class="jsx-4016328902 ">await</code>, we transpile those. Since V8 doesn’t support class decorators, we don’t transpile those.</p><p>See the  documentation about <a href="#customizing-babel-config" class="jsx-2156832104">customizing the babel config</a> and <a href="https://github.com/zeit/next.js/blob/master/build/babel/preset.js" target="_blank" rel="noopener noreferrer" class="jsx-329029718">next/preset</a> for more information.</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">Why a new Router?</summary><p>Next.js is special in that:</p><ul><li>Routes don’t need to be known ahead of time</li><li>Routes are always lazy-loadable</li><li>Top-level components can define <code class="jsx-4016328902 ">getInitialProps</code> that should <em>block</em> the loading of the route (either when server-rendering or lazy-loading)</li></ul><p>As a result, we were able to introduce a very simple approach to routing that consists of two pieces:</p><ul><li>Every top level component receives a <code class="jsx-4016328902 ">url</code> object to inspect the url or perform modifications to the history</li><li>A <code class="jsx-4016328902 ">&lt;Link /&gt;</code> component is used to wrap elements like anchors (<code class="jsx-4016328902 ">&lt;a/&gt;</code>) to perform client-side transitions</li></ul><p>We tested the flexibility of the routing with some interesting scenarios. For an example, check out <a href="https://github.com/zeit/nextgram" target="_blank" rel="noopener noreferrer" class="jsx-329029718">nextgram</a>.</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">How do I define a custom fancy route?</summary><p>We <a href="#custom-server-and-routing" class="jsx-2156832104">added</a> the ability to map between an arbitrary URL and any component by supplying a request handler.</p><p>On the client side, we have a parameter call <code class="jsx-4016328902 ">as</code> on <code class="jsx-4016328902 ">&lt;Link&gt;</code> that <em>decorates</em> the URL differently from the URL it <em>fetches</em>.</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">How do I fetch data?</summary><p>It’s up to you. <code class="jsx-4016328902 ">getInitialProps</code> is an <code class="jsx-4016328902 ">async</code> function (or a regular function that returns a <code class="jsx-4016328902 ">Promise</code>). It can retrieve data from anywhere.</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">Can I use it with GraphQL?</summary><p>Yes! Here&#x27;s an example with <a href="https://github.com/zeit/next.js/blob/master/examples/with-apollo" target="_blank" rel="noopener noreferrer" class="jsx-329029718">Apollo</a>.</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">Can I use it with Redux?</summary><p>Yes! Here&#x27;s an <a href="https://github.com/zeit/next.js/blob/master/examples/with-redux" target="_blank" rel="noopener noreferrer" class="jsx-329029718">example</a></p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">Can I use Next with my favorite Javascript library or toolkit?</summary><p>Since our first release we&#x27;ve had <strong>many</strong> example contributions, you can check them out in the <a href="https://github.com/zeit/next.js/blob/master/examples" target="_blank" rel="noopener noreferrer" class="jsx-329029718">examples</a> directory</p></details><details class="jsx-2868182892"><summary class="jsx-4030115387">What is this inspired by?</summary><p>Many of the goals we set out to accomplish were the ones listed in <a href="http://rauchg.com/2014/7-principles-of-rich-web-applications/" target="_blank" rel="noopener noreferrer" class="jsx-329029718">The 7 principles of Rich Web Applications</a> by Guillermo Rauch.</p><p>The ease-of-use of PHP is a great inspiration. We feel Next.js is a suitable replacement for many scenarios where you otherwise would use PHP to output HTML.</p><p>Unlike PHP, we benefit from the ES6 module system and every file exports a <strong>component or function</strong> that can be easily imported for lazy evaluation or testing.</p><p>As we were researching options for server-rendering React that didn’t involve a large number of steps, we came across <a href="https://github.com/facebookarchive/react-page" target="_blank" rel="noopener noreferrer" class="jsx-329029718">react-page</a> (now deprecated), a similar approach to Next.js by the creator of React Jordan Walke.</p></details><div class="jsx-2821545348"><h2 class="jsx-3989962531 lean " data-components-heading="true"><span id="contributing" class="jsx-3521603919 target docs-anchor-target"></span><a href="#contributing" class="jsx-3521603919">Contributing</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h2></div><p>Please see our <a href="https://github.com/zeit/next.js/blob/master/contributing.md" target="_blank" rel="noopener noreferrer" class="jsx-329029718">contributing.md</a></p><div class="jsx-2821545348"><h2 class="jsx-3989962531 lean " data-components-heading="true"><span id="authors" class="jsx-3521603919 target docs-anchor-target"></span><a href="#authors" class="jsx-3521603919">Authors</a><span class="jsx-3521603919 permalink"><span><svg viewBox="0 0 16 16" width="16" height="16"><title>permalink</title><g stroke-width="1" fill="#000000" stroke="#000000"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698"></path></g></svg></span></span></h2></div><ul><li>Arunoda Susiripala (<a href="https://twitter.com/arunoda" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@arunoda</a>) – <a href="https://zeit.co" target="_blank" rel="noopener noreferrer" class="jsx-329029718">ZEIT</a></li><li>Tim Neutkens (<a href="https://twitter.com/timneutkens" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@timneutkens</a>) – <a href="https://zeit.co" target="_blank" rel="noopener noreferrer" class="jsx-329029718">ZEIT</a></li><li>Naoyuki Kanezawa (<a href="https://twitter.com/nkzawa" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@nkzawa</a>) – <a href="https://zeit.co" target="_blank" rel="noopener noreferrer" class="jsx-329029718">ZEIT</a></li><li>Tony Kovanen (<a href="https://twitter.com/tonykovanen" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@tonykovanen</a>) – <a href="https://zeit.co" target="_blank" rel="noopener noreferrer" class="jsx-329029718">ZEIT</a></li><li>Guillermo Rauch (<a href="https://twitter.com/rauchg" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@rauchg</a>) – <a href="https://zeit.co" target="_blank" rel="noopener noreferrer" class="jsx-329029718">ZEIT</a></li><li>Dan Zajdband (<a href="https://twitter.com/impronunciable" target="_blank" rel="noopener noreferrer" class="jsx-329029718">@impronunciable</a>) – Knight-Mozilla / Coral Project</li></ul></div></div></div></div></div></div></div><script>__NEXT_DATA__ = {"props":{"pageProps":{}},"page":"/docs","query":{},"buildId":"WeQFcs1os6sOMY6FC6k3Y","nextExport":true};__NEXT_LOADED_PAGES__=[];__NEXT_REGISTER_PAGE=function(r,f){__NEXT_LOADED_PAGES__.push([r, f])}</script><script async="" id="__NEXT_PAGE__/docs" src="/_next/static/WeQFcs1os6sOMY6FC6k3Y/pages/docs.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/static/WeQFcs1os6sOMY6FC6k3Y/pages/_app.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/_next/static/WeQFcs1os6sOMY6FC6k3Y/pages/_error.js"></script><script src="/_next/static/runtime/webpack-42652fa8b82c329c0559.js" async=""></script><script src="/_next/static/chunks/commons.9e21cdbed9da63fd5a24.js" async=""></script><script src="/_next/static/runtime/main-102cb6d6521304c548b6.js" async=""></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-117491914-2"></script><script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'UA-117491914-2');
              </script></body></html>